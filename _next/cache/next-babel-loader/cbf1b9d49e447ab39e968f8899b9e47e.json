{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport { Input, TextArea, Button, Select, UploadImageContainer } from \"../../../static/styled-components/base\";\nimport { getOptions, addTool } from \"../../../utils/tools\";\nimport { changeFileName, validateImage } from \"../../../utils/images\";\nimport FileInput from \"../../utils/FileInput\";\nexport default function AddTool() {\n  var imageMessageError = \"Extens\\xE3o do arquivo enviado \\xE9 inv\\xE1lido. Extens\\xF5es permitidas \".concat(process.env.imageExtensionPermitted.toString(), \", com no m\\xE1ximo 10MB\");\n\n  var _useState = useState(\"\"),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      manufacturer = _useState2[0],\n      setManufacturer = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      description = _useState3[0],\n      setDescription = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      mainFeatures = _useState4[0],\n      setMainFeatures = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      category = _useState5[0],\n      setCategory = _useState5[1];\n\n  var _useState6 = useState({}),\n      specifications = _useState6[0],\n      setSpecifications = _useState6[1];\n\n  var _useState7 = useState({\n    result: \"success\",\n    open: false,\n    message: \"\"\n  }),\n      snackBar = _useState7[0],\n      setSnackBar = _useState7[1];\n\n  function handleClose() {\n    setSnackBar(_objectSpread({}, snackBar, {\n      open: false\n    }));\n  }\n\n  var _useState8 = useState([]),\n      manufacturers = _useState8[0],\n      setManufacturers = _useState8[1];\n\n  useEffect(function () {\n    function asyncFunc() {\n      getOptions(function (err, response) {\n        if (err) {\n          setSnackBar(_objectSpread({}, snackBar, {\n            open: false\n          }));\n          return;\n        }\n\n        setManufacturers(response.manufacturers.data);\n      });\n    }\n\n    asyncFunc();\n  }, []);\n\n  var _useState9 = useState({\n    toolFile1: null,\n    toolFile2: null,\n    toolFile3: null,\n    toolFile4: null,\n    toolFile5: null\n  }),\n      toolFiles = _useState9[0],\n      setToolFiles = _useState9[1];\n\n  function toolHandleChange(e) {\n    if (validateImage(process.env.imageExtensionPermitted, 10000, e.target.files[0])) {\n      var newName = parseInt(e.target.name[e.target.name.length - 1]) - 1;\n      setToolFiles(_objectSpread({}, toolFiles, _defineProperty({}, e.target.name, changeFileName(e.target.files[0], newName))));\n    } else {\n      setSnackBar({\n        open: true,\n        result: 'error',\n        message: imageMessageError\n      });\n    }\n  }\n\n  function toolCleanFileInput(name) {\n    setToolFiles(_objectSpread({}, toolFiles, _defineProperty({}, name, null)));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Adicionar nova pe\\xE7a\"), __jsx(\"div\", null, __jsx(Snackbar, {\n    open: snackBar.open,\n    autoHideDuration: 3500,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    severity: snackBar.result\n  }, snackBar.message)), __jsx(Input, {\n    placeholder: \"Nome\",\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    value: name\n  }), __jsx(Input, {\n    placeholder: \"Subt\\xEDtulo\",\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    value: description\n  }), __jsx(TextArea, {\n    placeholder: \"Caracter\\xEDsticas\",\n    onChange: function onChange(e) {\n      return setMainFeatures(e.target.value);\n    },\n    value: mainFeatures,\n    rows: \"5\"\n  }), __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      textAlign: \"center\",\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Fabricante\"), __jsx(Row, null, __jsx(Select, {\n    value: manufacturer,\n    onChange: function onChange(e) {\n      return setManufacturer(e.target.value);\n    }\n  }, __jsx(\"option\", {\n    value: \"\"\n  }, \"Escolha um fabricante\"), manufacturers.map(function (manufacturer) {\n    return __jsx(\"option\", {\n      value: manufacturer.id\n    }, manufacturer.name);\n  }))), __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      textAlign: \"center\",\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Fotos do produto\"), __jsx(Row, {\n    style: {\n      margin: \"30px 0 \",\n      justifyContent: \"center\"\n    }\n  }, __jsx(ImageContainer, null, __jsx(FileInput, {\n    handleChange: toolHandleChange,\n    labelInputFile: \"Imagem principal\",\n    id: \"toolFile1\",\n    name: \"toolFile1\",\n    file: toolFiles.toolFile1,\n    cleanFileInput: function cleanFileInput() {\n      return toolCleanFileInput(\"toolFile1\");\n    }\n  }))), __jsx(Row, {\n    style: {\n      flexWrap: \"wrap\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(ImageContainer, null, __jsx(FileInput, {\n    handleChange: toolHandleChange,\n    labelInputFile: \"Imagem 2\",\n    id: \"toolFile2\",\n    name: \"toolFile2\",\n    file: toolFiles.toolFile2,\n    cleanFileInput: function cleanFileInput() {\n      return toolCleanFileInput(\"toolFile2\");\n    }\n  })), __jsx(ImageContainer, null, __jsx(FileInput, {\n    handleChange: toolHandleChange,\n    labelInputFile: \"Imagem 3\",\n    id: \"toolFile3\",\n    name: \"toolFile3\",\n    file: toolFiles.toolFile3,\n    cleanFileInput: function cleanFileInput() {\n      return toolCleanFileInput(\"toolFile3\");\n    }\n  })), __jsx(ImageContainer, null, __jsx(FileInput, {\n    handleChange: toolHandleChange,\n    labelInputFile: \"Imagem 4\",\n    id: \"toolFile4\",\n    name: \"toolFile4\",\n    file: toolFiles.toolFile4,\n    cleanFileInput: function cleanFileInput() {\n      return toolCleanFileInput(\"toolFile4\");\n    }\n  })), __jsx(ImageContainer, null, __jsx(FileInput, {\n    handleChange: toolHandleChange,\n    labelInputFile: \"Imagem 5\",\n    id: \"toolFile5\",\n    name: \"toolFile5\",\n    file: toolFiles.toolFile5,\n    cleanFileInput: function cleanFileInput() {\n      return toolCleanFileInput(\"toolFile5\");\n    }\n  })))), __jsx(Button, {\n    onClick: function onClick() {\n      return addTool({\n        name: name,\n        manufacturer: manufacturer,\n        description: description,\n        mainFeatures: mainFeatures\n      }, toolFiles, function (err, data) {\n        if (err) {\n          setSnackBar({\n            result: 'error',\n            message: err,\n            open: true\n          });\n          return;\n        }\n\n        setSnackBar({\n          result: 'success',\n          message: 'Peça criada com sucesso',\n          open: true\n        });\n        cleanForm();\n      });\n    }\n  }, \"Adicionar pe\\xE7a\"));\n\n  function cleanForm() {\n    setName(\"\");\n    setDescription(\"\");\n    setManufacturer(\"\");\n    setMainFeatures(\"\");\n    setToolFiles({\n      toolFile1: null,\n      toolFile2: null,\n      toolFile3: null,\n      toolFile4: null,\n      toolFile5: null\n    });\n  }\n}\nexport var ImageContainer = styled.div.withConfig({\n  displayName: \"AddTool__ImageContainer\",\n  componentId: \"esjjej-0\"\n})([\"margin:10px;label{width:100%;height:100%;}.div-file-input{height:auto;width:200px;}.image-container{width:100%;height:auto;}\"]);\nexport var Row = styled.div.withConfig({\n  displayName: \"AddTool__Row\",\n  componentId: \"esjjej-1\"\n})([\"display:flex;width:100%;flex-direction:row;justify-content:space-between;input{margin-right:5px;}select{margin-right:5px;}\"]);","map":{"version":3,"sources":["C:/Users/Gluz/Projects/web/multcostura/multcostura-web/src/components/admin/tools/AddTool.jsx"],"names":["React","useState","useEffect","styled","Snackbar","Alert","Input","TextArea","Button","Select","UploadImageContainer","getOptions","addTool","changeFileName","validateImage","FileInput","AddTool","imageMessageError","process","env","imageExtensionPermitted","toString","name","setName","manufacturer","setManufacturer","description","setDescription","mainFeatures","setMainFeatures","category","setCategory","specifications","setSpecifications","result","open","message","snackBar","setSnackBar","handleClose","manufacturers","setManufacturers","asyncFunc","err","response","data","toolFile1","toolFile2","toolFile3","toolFile4","toolFile5","toolFiles","setToolFiles","toolHandleChange","e","target","files","newName","parseInt","length","toolCleanFileInput","color","value","textAlign","map","id","margin","justifyContent","flexWrap","cleanForm","ImageContainer","div","Row"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AAEA,SACEC,KADF,EAEEC,QAFF,EAGEC,MAHF,EAIEC,MAJF,EAKEC,oBALF,QAMO,wCANP;AAQA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,sBAApC;AACA,SAASC,cAAT,EAAyBC,aAAzB,QAA8C,uBAA9C;AAEA,OAAOC,SAAP,MAAsB,uBAAtB;AAEA,eAAe,SAASC,OAAT,GAAmB;AAChC,MAAMC,iBAAiB,sFAAmEC,OAAO,CAACC,GAAR,CAAYC,uBAAZ,CAAoCC,QAApC,EAAnE,4BAAvB;;AADgC,kBAERpB,QAAQ,CAAC,EAAD,CAFA;AAAA,MAEzBqB,IAFyB;AAAA,MAEnBC,OAFmB;;AAAA,mBAGQtB,QAAQ,CAAC,EAAD,CAHhB;AAAA,MAGzBuB,YAHyB;AAAA,MAGXC,eAHW;;AAAA,mBAIMxB,QAAQ,CAAC,EAAD,CAJd;AAAA,MAIzByB,WAJyB;AAAA,MAIZC,cAJY;;AAAA,mBAKQ1B,QAAQ,CAAC,EAAD,CALhB;AAAA,MAKzB2B,YALyB;AAAA,MAKXC,eALW;;AAAA,mBAMA5B,QAAQ,CAAC,EAAD,CANR;AAAA,MAMzB6B,QANyB;AAAA,MAMfC,WANe;;AAAA,mBAOY9B,QAAQ,CAAC,EAAD,CAPpB;AAAA,MAOzB+B,cAPyB;AAAA,MAOTC,iBAPS;;AAAA,mBASAhC,QAAQ,CAAC;AACvCiC,IAAAA,MAAM,EAAE,SAD+B;AAEvCC,IAAAA,IAAI,EAAE,KAFiC;AAGvCC,IAAAA,OAAO,EAAE;AAH8B,GAAD,CATR;AAAA,MASzBC,QATyB;AAAA,MASfC,WATe;;AAehC,WAASC,WAAT,GAAuB;AACrBD,IAAAA,WAAW,mBACND,QADM;AAETF,MAAAA,IAAI,EAAE;AAFG,OAAX;AAID;;AApB+B,mBAsBUlC,QAAQ,CAAC,EAAD,CAtBlB;AAAA,MAsBzBuC,aAtByB;AAAA,MAsBVC,gBAtBU;;AAuBhCvC,EAAAA,SAAS,CAAC,YAAM;AACd,aAASwC,SAAT,GAAqB;AACnB/B,MAAAA,UAAU,CAAC,UAASgC,GAAT,EAAcC,QAAd,EAAwB;AACjC,YAAID,GAAJ,EAAS;AACPL,UAAAA,WAAW,mBACND,QADM;AAETF,YAAAA,IAAI,EAAE;AAFG,aAAX;AAIA;AACD;;AAEDM,QAAAA,gBAAgB,CAACG,QAAQ,CAACJ,aAAT,CAAuBK,IAAxB,CAAhB;AACD,OAVS,CAAV;AAWD;;AACDH,IAAAA,SAAS;AACV,GAfQ,EAeN,EAfM,CAAT;;AAvBgC,mBAwCEzC,QAAQ,CAAC;AACzC6C,IAAAA,SAAS,EAAE,IAD8B;AAEzCC,IAAAA,SAAS,EAAE,IAF8B;AAGzCC,IAAAA,SAAS,EAAE,IAH8B;AAIzCC,IAAAA,SAAS,EAAE,IAJ8B;AAKzCC,IAAAA,SAAS,EAAE;AAL8B,GAAD,CAxCV;AAAA,MAwCzBC,SAxCyB;AAAA,MAwCdC,YAxCc;;AAgDhC,WAASC,gBAAT,CAA0BC,CAA1B,EAA6B;AAC3B,QAAIxC,aAAa,CAACI,OAAO,CAACC,GAAR,CAAYC,uBAAb,EAAsC,KAAtC,EAA6CkC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAA7C,CAAjB,EAAkF;AAChF,UAAMC,OAAO,GAAGC,QAAQ,CAACJ,CAAC,CAACC,MAAF,CAASjC,IAAT,CAAcgC,CAAC,CAACC,MAAF,CAASjC,IAAT,CAAcqC,MAAd,GAAuB,CAArC,CAAD,CAAR,GAAoD,CAApE;AACAP,MAAAA,YAAY,mBACPD,SADO,sBAETG,CAAC,CAACC,MAAF,CAASjC,IAFA,EAEOT,cAAc,CAACyC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,EAAoBC,OAApB,CAFrB,GAAZ;AAID,KAND,MAMO;AACLnB,MAAAA,WAAW,CAAC;AACVH,QAAAA,IAAI,EAAE,IADI;AAEVD,QAAAA,MAAM,EAAE,OAFE;AAGVE,QAAAA,OAAO,EAAEnB;AAHC,OAAD,CAAX;AAKD;AACF;;AAED,WAAS2C,kBAAT,CAA4BtC,IAA5B,EAAkC;AAChC8B,IAAAA,YAAY,mBACPD,SADO,sBAET7B,IAFS,EAEF,IAFE,GAAZ;AAID;;AAGD,SACE,4BACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAA2B,IAAA,KAAK,EAAE;AAAEuC,MAAAA,KAAK,EAAE;AAAT;AAAlC,8BADF,EAIE,mBACE,MAAC,QAAD;AACE,IAAA,IAAI,EAAExB,QAAQ,CAACF,IADjB;AAEE,IAAA,gBAAgB,EAAE,IAFpB;AAGE,IAAA,OAAO,EAAEI;AAHX,KAKE,MAAC,KAAD;AAAO,IAAA,QAAQ,EAAEF,QAAQ,CAACH;AAA1B,KAAmCG,QAAQ,CAACD,OAA5C,CALF,CADF,EAQE,MAAC,KAAD;AACE,IAAA,WAAW,EAAC,MADd;AAEE,IAAA,QAAQ,EAAE,kBAAAkB,CAAC;AAAA,aAAI/B,OAAO,CAAC+B,CAAC,CAACC,MAAF,CAASO,KAAV,CAAX;AAAA,KAFb;AAGE,IAAA,KAAK,EAAExC;AAHT,IARF,EAaE,MAAC,KAAD;AACE,IAAA,WAAW,EAAC,cADd;AAEE,IAAA,QAAQ,EAAE,kBAAAgC,CAAC;AAAA,aAAI3B,cAAc,CAAC2B,CAAC,CAACC,MAAF,CAASO,KAAV,CAAlB;AAAA,KAFb;AAGE,IAAA,KAAK,EAAEpC;AAHT,IAbF,EAkBE,MAAC,QAAD;AACE,IAAA,WAAW,EAAC,oBADd;AAEE,IAAA,QAAQ,EAAE,kBAAA4B,CAAC;AAAA,aAAIzB,eAAe,CAACyB,CAAC,CAACC,MAAF,CAASO,KAAV,CAAnB;AAAA,KAFb;AAGE,IAAA,KAAK,EAAElC,YAHT;AAIE,IAAA,IAAI,EAAC;AAJP,IAlBF,EAwBE;AACE,IAAA,SAAS,EAAC,YADZ;AAEE,IAAA,KAAK,EAAE;AACLmC,MAAAA,SAAS,EAAE,QADN;AAELF,MAAAA,KAAK,EAAE;AAFF;AAFT,kBAxBF,EAiCE,MAAC,GAAD,QACE,MAAC,MAAD;AACE,IAAA,KAAK,EAAErC,YADT;AAEE,IAAA,QAAQ,EAAE,kBAAA8B,CAAC;AAAA,aAAI7B,eAAe,CAAC6B,CAAC,CAACC,MAAF,CAASO,KAAV,CAAnB;AAAA;AAFb,KAIE;AAAQ,IAAA,KAAK,EAAC;AAAd,6BAJF,EAKGtB,aAAa,CAACwB,GAAd,CAAkB,UAAAxC,YAAY;AAAA,WAC7B;AAAQ,MAAA,KAAK,EAAEA,YAAY,CAACyC;AAA5B,OAAiCzC,YAAY,CAACF,IAA9C,CAD6B;AAAA,GAA9B,CALH,CADF,CAjCF,EA4CE;AACE,IAAA,SAAS,EAAC,YADZ;AAEE,IAAA,KAAK,EAAE;AACLyC,MAAAA,SAAS,EAAE,QADN;AAELF,MAAAA,KAAK,EAAE;AAFF;AAFT,wBA5CF,EAqDE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEK,MAAAA,MAAM,EAAE,SAAV;AAAqBC,MAAAA,cAAc,EAAE;AAArC;AAAZ,KACE,MAAC,cAAD,QACE,MAAC,SAAD;AACE,IAAA,YAAY,EAAEd,gBADhB;AAEE,IAAA,cAAc,EAAC,kBAFjB;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,IAAI,EAAC,WAJP;AAKE,IAAA,IAAI,EAAEF,SAAS,CAACL,SALlB;AAME,IAAA,cAAc,EAAE;AAAA,aAAMc,kBAAkB,CAAC,WAAD,CAAxB;AAAA;AANlB,IADF,CADF,CArDF,EAiEE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEQ,MAAAA,QAAQ,EAAE,MAAZ;AAAoBD,MAAAA,cAAc,EAAE;AAApC;AAAZ,KACE,MAAC,cAAD,QACE,MAAC,SAAD;AACE,IAAA,YAAY,EAAEd,gBADhB;AAEE,IAAA,cAAc,EAAC,UAFjB;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,IAAI,EAAC,WAJP;AAKE,IAAA,IAAI,EAAEF,SAAS,CAACJ,SALlB;AAME,IAAA,cAAc,EAAE;AAAA,aAAMa,kBAAkB,CAAC,WAAD,CAAxB;AAAA;AANlB,IADF,CADF,EAWE,MAAC,cAAD,QACE,MAAC,SAAD;AACE,IAAA,YAAY,EAAEP,gBADhB;AAEE,IAAA,cAAc,EAAC,UAFjB;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,IAAI,EAAC,WAJP;AAKE,IAAA,IAAI,EAAEF,SAAS,CAACH,SALlB;AAME,IAAA,cAAc,EAAE;AAAA,aAAMY,kBAAkB,CAAC,WAAD,CAAxB;AAAA;AANlB,IADF,CAXF,EAqBE,MAAC,cAAD,QACE,MAAC,SAAD;AACE,IAAA,YAAY,EAAEP,gBADhB;AAEE,IAAA,cAAc,EAAC,UAFjB;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,IAAI,EAAC,WAJP;AAKE,IAAA,IAAI,EAAEF,SAAS,CAACF,SALlB;AAME,IAAA,cAAc,EAAE;AAAA,aAAMW,kBAAkB,CAAC,WAAD,CAAxB;AAAA;AANlB,IADF,CArBF,EA+BE,MAAC,cAAD,QACE,MAAC,SAAD;AACE,IAAA,YAAY,EAAEP,gBADhB;AAEE,IAAA,cAAc,EAAC,UAFjB;AAGE,IAAA,EAAE,EAAC,WAHL;AAIE,IAAA,IAAI,EAAC,WAJP;AAKE,IAAA,IAAI,EAAEF,SAAS,CAACD,SALlB;AAME,IAAA,cAAc,EAAE;AAAA,aAAMU,kBAAkB,CAAC,WAAD,CAAxB;AAAA;AANlB,IADF,CA/BF,CAjEF,CAJF,EAiHE,MAAC,MAAD;AACE,IAAA,OAAO,EAAE;AAAA,aACPhD,OAAO,CAAC;AACNU,QAAAA,IAAI,EAAJA,IADM;AAENE,QAAAA,YAAY,EAAZA,YAFM;AAGNE,QAAAA,WAAW,EAAXA,WAHM;AAINE,QAAAA,YAAY,EAAZA;AAJM,OAAD,EAKJuB,SALI,EAKO,UAAUR,GAAV,EAAeE,IAAf,EAAqB;AACjC,YAAIF,GAAJ,EAAS;AACPL,UAAAA,WAAW,CAAC;AACVJ,YAAAA,MAAM,EAAE,OADE;AAEVE,YAAAA,OAAO,EAAEO,GAFC;AAGVR,YAAAA,IAAI,EAAE;AAHI,WAAD,CAAX;AAKA;AACD;;AACDG,QAAAA,WAAW,CAAC;AACVJ,UAAAA,MAAM,EAAE,SADE;AAEVE,UAAAA,OAAO,EAAE,yBAFC;AAGVD,UAAAA,IAAI,EAAE;AAHI,SAAD,CAAX;AAMAkC,QAAAA,SAAS;AACV,OArBM,CADA;AAAA;AADX,yBAjHF,CADF;;AAiJA,WAASA,SAAT,GAAqB;AACnB9C,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAI,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAF,IAAAA,eAAe,CAAC,EAAD,CAAf;AACAI,IAAAA,eAAe,CAAC,EAAD,CAAf;AACAuB,IAAAA,YAAY,CAAC;AACXN,MAAAA,SAAS,EAAE,IADA;AAEXC,MAAAA,SAAS,EAAE,IAFA;AAGXC,MAAAA,SAAS,EAAE,IAHA;AAIXC,MAAAA,SAAS,EAAE,IAJA;AAKXC,MAAAA,SAAS,EAAE;AALA,KAAD,CAAZ;AAOD;AACF;AAED,OAAO,IAAMoB,cAAc,GAAGnE,MAAM,CAACoE,GAAV;AAAA;AAAA;AAAA,oIAApB;AAgBP,OAAO,IAAMC,GAAG,GAAGrE,MAAM,CAACoE,GAAV;AAAA;AAAA;AAAA,kIAAT","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport {\n  Input,\n  TextArea,\n  Button,\n  Select,\n  UploadImageContainer\n} from \"../../../static/styled-components/base\";\n\nimport { getOptions, addTool } from \"../../../utils/tools\";\nimport { changeFileName, validateImage } from \"../../../utils/images\";\n\nimport FileInput from \"../../utils/FileInput\";\n\nexport default function AddTool() {\n  const imageMessageError = `Extensão do arquivo enviado é inválido. Extensões permitidas ${process.env.imageExtensionPermitted.toString()}, com no máximo 10MB`\n  const [name, setName] = useState(\"\");\n  const [manufacturer, setManufacturer] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [mainFeatures, setMainFeatures] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [specifications, setSpecifications] = useState({});\n\n  const [snackBar, setSnackBar] = useState({\n    result: \"success\",\n    open: false,\n    message: \"\"\n  });\n\n  function handleClose() {\n    setSnackBar({\n      ...snackBar,\n      open: false\n    });\n  }\n\n  const [manufacturers, setManufacturers] = useState([]);\n  useEffect(() => {\n    function asyncFunc() {\n      getOptions(function(err, response) {\n        if (err) {\n          setSnackBar({\n            ...snackBar,\n            open: false\n          });\n          return;\n        }\n\n        setManufacturers(response.manufacturers.data);\n      });\n    }\n    asyncFunc();\n  }, []);\n\n  const [toolFiles, setToolFiles] = useState({\n    toolFile1: null,\n    toolFile2: null,\n    toolFile3: null,\n    toolFile4: null,\n    toolFile5: null\n  });\n\n  function toolHandleChange(e) {\n    if (validateImage(process.env.imageExtensionPermitted, 10000, e.target.files[0])) {\n      const newName = parseInt(e.target.name[e.target.name.length - 1]) - 1;\n      setToolFiles({\n        ...toolFiles,\n        [e.target.name]: changeFileName(e.target.files[0], newName)\n      });\n    } else {\n      setSnackBar({\n        open: true,\n        result: 'error',\n        message: imageMessageError\n      })\n    }\n  }\n\n  function toolCleanFileInput(name) {\n    setToolFiles({\n      ...toolFiles,\n      [name]: null\n    });\n  }\n\n\n  return (\n    <>\n      <h3 className=\"main-title\" style={{ color: \"rgb(129, 22, 27)\" }}>\n        Adicionar nova peça\n      </h3>\n      <div>\n        <Snackbar\n          open={snackBar.open}\n          autoHideDuration={3500}\n          onClose={handleClose}\n        >\n          <Alert severity={snackBar.result}>{snackBar.message}</Alert>\n        </Snackbar>\n        <Input\n          placeholder=\"Nome\"\n          onChange={e => setName(e.target.value)}\n          value={name}\n        />\n        <Input\n          placeholder=\"Subtítulo\"\n          onChange={e => setDescription(e.target.value)}\n          value={description}\n        />\n        <TextArea\n          placeholder=\"Características\"\n          onChange={e => setMainFeatures(e.target.value)}\n          value={mainFeatures}\n          rows=\"5\"\n        />\n        <h3\n          className=\"main-title\"\n          style={{\n            textAlign: \"center\",\n            color: \"rgb(129, 22, 27)\"\n          }}\n        >\n          Fabricante\n        </h3>\n        <Row>\n          <Select\n            value={manufacturer}\n            onChange={e => setManufacturer(e.target.value)}\n          >\n            <option value=\"\">Escolha um fabricante</option>\n            {manufacturers.map(manufacturer => (\n              <option value={manufacturer.id}>{manufacturer.name}</option>\n            ))}\n          </Select>\n        </Row>\n        <h3\n          className=\"main-title\"\n          style={{\n            textAlign: \"center\",\n            color: \"rgb(129, 22, 27)\"\n          }}\n        >\n          Fotos do produto\n        </h3>\n        <Row style={{ margin: \"30px 0 \", justifyContent: \"center\" }}>\n          <ImageContainer>\n            <FileInput\n              handleChange={toolHandleChange}\n              labelInputFile=\"Imagem principal\"\n              id=\"toolFile1\"\n              name=\"toolFile1\"\n              file={toolFiles.toolFile1}\n              cleanFileInput={() => toolCleanFileInput(\"toolFile1\")}\n            />\n          </ImageContainer>\n        </Row>\n        <Row style={{ flexWrap: \"wrap\", justifyContent: \"center\" }}>\n          <ImageContainer>\n            <FileInput\n              handleChange={toolHandleChange}\n              labelInputFile=\"Imagem 2\"\n              id=\"toolFile2\"\n              name=\"toolFile2\"\n              file={toolFiles.toolFile2}\n              cleanFileInput={() => toolCleanFileInput(\"toolFile2\")}\n            />\n          </ImageContainer>\n          <ImageContainer >\n            <FileInput\n              handleChange={toolHandleChange}\n              labelInputFile=\"Imagem 3\"\n              id=\"toolFile3\"\n              name=\"toolFile3\"\n              file={toolFiles.toolFile3}\n              cleanFileInput={() => toolCleanFileInput(\"toolFile3\")}\n            />\n          </ImageContainer>\n          <ImageContainer >\n            <FileInput\n              handleChange={toolHandleChange}\n              labelInputFile=\"Imagem 4\"\n              id=\"toolFile4\"\n              name=\"toolFile4\"\n              file={toolFiles.toolFile4}\n              cleanFileInput={() => toolCleanFileInput(\"toolFile4\")}\n            />\n          </ImageContainer>\n          <ImageContainer>\n            <FileInput\n              handleChange={toolHandleChange}\n              labelInputFile=\"Imagem 5\"\n              id=\"toolFile5\"\n              name=\"toolFile5\"\n              file={toolFiles.toolFile5}\n              cleanFileInput={() => toolCleanFileInput(\"toolFile5\")}\n            />\n          </ImageContainer>\n        </Row>\n      </div>\n\n      <Button\n        onClick={() =>\n          addTool({\n            name,\n            manufacturer,\n            description,\n            mainFeatures,\n          }, toolFiles, function (err, data) {\n            if (err) {\n              setSnackBar({\n                result: 'error',\n                message: err,\n                open: true\n              })\n              return;\n            }\n            setSnackBar({\n              result: 'success',\n              message: 'Peça criada com sucesso',\n              open: true\n            })\n\n            cleanForm()\n          })\n        }\n      >\n        Adicionar peça\n      </Button>\n    </>\n  );\n\n  function cleanForm() {\n    setName(\"\");\n    setDescription(\"\");\n    setManufacturer(\"\");\n    setMainFeatures(\"\");\n    setToolFiles({\n      toolFile1: null,\n      toolFile2: null,\n      toolFile3: null,\n      toolFile4: null,\n      toolFile5: null,\n    })\n  }\n}\n\nexport const ImageContainer = styled.div`\n  margin: 10px;\n  label {\n    width: 100%;\n    height: 100%;\n  }\n  .div-file-input {\n    height: auto;\n    width: 200px;\n  }\n  .image-container {\n    width:100%;\n    height:auto;\n  }\n`;\n\nexport const Row = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  justify-content: space-between;\n  input {\n    margin-right: 5px;\n  }\n  select {\n    margin-right: 5px;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}