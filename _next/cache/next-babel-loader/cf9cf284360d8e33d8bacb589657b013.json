{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport FileInput from \"rc-upload\";\nimport Dropzone, { useDropzone } from \"react-dropzone\";\nimport GalleryImages from \"./GalleryImages\";\nimport setApi from \"../../../api\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowUp, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport loadingGif from \"../../../static/images/loading.gif\";\nimport { validateImage } from '../../../utils/images';\nexport default function EditGalleryImages(_ref) {\n  var images = _ref.images,\n      removeImage = _ref.removeImage,\n      onSuccess = _ref.onSuccess,\n      onError = _ref.onError,\n      headers = _ref.headers;\n\n  var _useState = useState(false),\n      uploading = _useState[0],\n      setUp = _useState[1];\n\n  var onDrop = useCallback(function _callee(acceptedFiles) {\n    var error, file, formData;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setUp(true);\n            error = false;\n            _context.t0 = _regeneratorRuntime.keys(acceptedFiles);\n\n          case 3:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 18;\n              break;\n            }\n\n            file = _context.t1.value;\n\n            if (!validateImage(process.env.imageExtensionPermitted, 10000, acceptedFiles[file])) {\n              _context.next = 14;\n              break;\n            }\n\n            formData = new FormData();\n            formData.append(\"img\", acceptedFiles[file]);\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(setApi(_objectSpread({}, headers)).post(\"/gallery\", formData));\n\n          case 10:\n            error = false;\n            onSuccess();\n            _context.next = 16;\n            break;\n\n          case 14:\n            onError(\"Extens\\xE3o do arquivo \".concat(acceptedFiles[file].name, \" \\xE9 inv\\xE1lido. Extens\\xF5es permitidas \").concat(process.env.imageExtensionPermitted.toString(), \", com no m\\xE1ximo 10MB\"));\n            error = true;\n\n          case 16:\n            _context.next = 3;\n            break;\n\n          case 18:\n            setUp(false);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var _useDropzone = useDropzone({\n    onDrop: onDrop\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps;\n\n  return __jsx(React.Fragment, null, __jsx(Row, null, __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Galeria de Imagens\")), __jsx(Row, null, __jsx(GalleryImages, {\n    images: images,\n    removeImage: removeImage,\n    uploading: uploading\n  })), __jsx(Row, null, uploading ? __jsx(Loading, {\n    src: loadingGif\n  }) : __jsx(LabelInput, getRootProps(), __jsx(\"input\", getInputProps()), __jsx(\"p\", null, \"Arraste e solte os arquivos ou clique aqui para enviar as imagens\"))));\n}\nvar Loading = styled.img.withConfig({\n  displayName: \"EditGalleryImages__Loading\",\n  componentId: \"ql1sqt-0\"\n})([\"width:32px;height:32px;display:block;margin:auto;\"]);\nvar Row = styled.div.withConfig({\n  displayName: \"EditGalleryImages__Row\",\n  componentId: \"ql1sqt-1\"\n})([\"display:flex;flex:1;flex-direction:row;justify-content:center;padding:15px;\"]);\nvar LabelInput = styled.div.withConfig({\n  displayName: \"EditGalleryImages__LabelInput\",\n  componentId: \"ql1sqt-2\"\n})([\"display:flex;flex-direction:column;color:grey;align-items:center;width:100%;border:3px dotted grey;cursor:pointer;padding:50px;text-align:center;:hover{border:3px dotted lightblue;}\"]);","map":null,"metadata":{},"sourceType":"module"}