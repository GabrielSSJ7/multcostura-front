{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport setApi from \"../api\";\nimport { fieldValidation, validateImage } from \"../utils/validate\";\nexport function getMachines(cb, data) {\n  var filter = data ? data : {};\n  setApi().get(\"/machine?categories=\".concat(filter.category, \"&manufacturer=\").concat(filter.manufacturer, \"&search=\").concat(filter.search)).then(function (response) {\n    cb(null, response.data);\n  })[\"catch\"](function (err) {\n    cb(err.response ? err.response.data : err.toString());\n  });\n}\nexport function getMachine(id, cb) {\n  setApi().get(\"/machine/\".concat(id)).then(function (response) {\n    cb(null, response.data);\n  })[\"catch\"](function (err) {\n    cb(err.response ? err.response.data : err.toString());\n  });\n}\nexport function getOptions(cb) {\n  var manufacturers, categories;\n  return _regeneratorRuntime.async(function getOptions$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(setApi().get(\"/manufacturer\"));\n\n        case 3:\n          manufacturers = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(setApi().get(\"/categories\"));\n\n        case 6:\n          categories = _context.sent;\n          cb(null, {\n            manufacturers: manufacturers,\n            categories: categories\n          });\n          _context.next = 13;\n          break;\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](0);\n          cb(_context.t0);\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 10]], Promise);\n}\nexport function deleteImage(id, type, image, cb) {\n  setApi()[\"delete\"](\"/images?id=\".concat(id, \"&type=\").concat(type, \"&image=\").concat(image)).then(function (response) {\n    cb(null);\n  })[\"catch\"](function (err) {\n    cb(err.response ? err.response.data : err.toString());\n  });\n}\nexport function updateMachine(machine, machineFiles, sewingFile, prodRefFiles, files, cb) {\n  var id, name, description, mainFeatures, specifications, category, manufacturer, formData, machineFilesKeys, prodRefFilesKeys;\n  return _regeneratorRuntime.async(function updateMachine$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          console.log(sewingFile);\n          id = machine.id, name = machine.name, description = machine.description, mainFeatures = machine.mainFeatures, specifications = machine.specifications, category = machine.category, manufacturer = machine.manufacturer;\n          formData = new FormData();\n          console.log('specifications', JSON.stringify(specifications));\n          formData.append(\"name\", name);\n          formData.append(\"description\", description);\n          formData.append(\"mainFeatures\", mainFeatures);\n          formData.append(\"specifications\", specifications ? Object.keys(specifications).length > 0 ? JSON.stringify(specifications) : null : null);\n          formData.append(\"category\", category);\n          formData.append(\"manufacturer\", manufacturer);\n          formData.append(\"video\", machine.video);\n          formData.append('folheto', files.folheto);\n          formData.append('manual', files.manual);\n          machineFilesKeys = Object.keys(machineFiles);\n          machineFilesKeys.forEach(function (mkey) {\n            formData.append(\"machines\", machineFiles[mkey]);\n          });\n          formData.append(\"sewingType\", sewingFile);\n          prodRefFilesKeys = Object.keys(prodRefFiles);\n          prodRefFilesKeys.forEach(function (prfkey) {\n            formData.append(\"productReferences\", prodRefFiles[prfkey]);\n          });\n          setApi().put(\"/machine/\" + id, formData).then(function (response) {\n            cb(null, response.data);\n          })[\"catch\"](function (err) {\n            cb(err.response ? err.response.data : err.toString());\n          });\n\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function addMachine(machine, machineFiles, sewingTypeFile, refProdFiles, files, cb) {\n  var formData = new FormData();\n  var machineFilesKeys = Object.keys(machineFiles);\n  var hasError = [false, false, false];\n  machineFilesKeys.forEach(function (mkey) {\n    hasError[0] = !validateImage([\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"], 10000, machineFiles[mkey]);\n    formData.append(\"machines\", machineFiles[mkey]);\n  });\n  var refProdFilesKey = Object.keys(refProdFiles);\n  refProdFilesKey.forEach(function (rfKey) {\n    hasError[1] = !validateImage([\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"], 10000, refProdFiles[rfKey]);\n    formData.append(\"productReferences\", refProdFiles[rfKey]);\n  });\n  hasError[2] = !validateImage([\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"], 10000, sewingTypeFile);\n\n  if (hasError.includes(true)) {\n    return cb(\"Você precisa subir imagens png, jpg, jpeg, svg, gif, webp com no máximo 10MB\");\n  }\n\n  var fieldError = fieldValidation({\n    nome: machine.name,\n    fabricante: machine.manufacturer,\n    subtítulo: machine.description,\n    categoria: machine.category,\n    características: machine.mainFeatures\n  });\n\n  if (fieldError[\"return\"]) {\n    formData.append(\"name\", machine.name);\n    formData.append(\"manufacturer\", machine.manufacturer);\n    formData.append(\"description\", machine.description);\n    formData.append(\"category\", machine.category);\n    formData.append(\"mainFeatures\", machine.mainFeatures);\n    formData.append(\"specifications\", JSON.stringify(machine.specifications));\n    formData.append(\"video\", machine.video);\n    formData.append('folheto', files.folheto);\n    formData.append('manual', files.manual);\n    setApi().post(\"machine\", formData).then(function (response) {\n      cb(null, response.data);\n    })[\"catch\"](function (err) {\n      cb(err.response ? err.response.data : err.toString());\n    });\n  } else {\n    return cb(\"\".concat(fieldError.message, \" \").concat(fieldError.field));\n  }\n}\nexport function deleteMachine(id, cb) {\n  setApi()[\"delete\"](\"/machine/\".concat(id)).then(function (response) {\n    cb(null, response.data);\n  })[\"catch\"](function (err) {\n    cb(err.response ? err.response.data : err.toString());\n  });\n}","map":{"version":3,"sources":["C:/Users/Gluz/Projects/web/multcostura/multcostura-web/src/utils/machines.js"],"names":["setApi","fieldValidation","validateImage","getMachines","cb","data","filter","get","category","manufacturer","search","then","response","err","toString","getMachine","id","getOptions","manufacturers","categories","deleteImage","type","image","updateMachine","machine","machineFiles","sewingFile","prodRefFiles","files","console","log","name","description","mainFeatures","specifications","formData","FormData","JSON","stringify","append","Object","keys","length","video","folheto","manual","machineFilesKeys","forEach","mkey","prodRefFilesKeys","prfkey","put","addMachine","sewingTypeFile","refProdFiles","hasError","refProdFilesKey","rfKey","includes","fieldError","nome","fabricante","subtítulo","categoria","características","post","message","field","deleteMachine"],"mappings":"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","sourcesContent":["import setApi from \"../api\";\nimport { fieldValidation, validateImage } from \"../utils/validate\";\n\nexport function getMachines(cb, data) {\n  const filter = data ? data : {}\n  setApi()\n    .get(`/machine?categories=${filter.category}&manufacturer=${filter.manufacturer}&search=${filter.search}`)\n    .then(response => {\n      cb(null, response.data);\n    })\n    .catch(err => {\n      cb(err.response ? err.response.data : err.toString());\n    });\n}\n\nexport function getMachine(id, cb) {\n  setApi()\n    .get(`/machine/${id}`)\n    .then(response => {\n      cb(null, response.data);\n    })\n    .catch(err => {\n      cb(err.response ? err.response.data : err.toString());\n    });\n}\n\nexport async function getOptions(cb) {\n  try {\n    const manufacturers = await setApi().get(\"/manufacturer\");\n    const categories = await setApi().get(\"/categories\");\n    cb(null, { manufacturers, categories });\n  } catch (e) {\n    cb(e);\n  }\n}\n\nexport function deleteImage(id, type, image, cb) {\n  setApi()\n    .delete(`/images?id=${id}&type=${type}&image=${image}`)\n    .then(response => {\n      cb(null);\n    })\n    .catch(err => {\n      cb(err.response ? err.response.data : err.toString());\n    });\n}\n\nexport async function updateMachine(\n  machine,\n  machineFiles,\n  sewingFile,\n  prodRefFiles,\n  files,\n  cb\n) {\n  console.log(sewingFile);\n\n  const {\n    id,\n    name,\n    description,\n    mainFeatures,\n    specifications,\n    category,\n    manufacturer\n  } = machine;\n  const formData = new FormData();\n  console.log('specifications', JSON.stringify(specifications))\n  formData.append(\"name\", name);\n  formData.append(\"description\", description);\n  formData.append(\"mainFeatures\", mainFeatures);\n  formData.append(\"specifications\", specifications ? Object.keys(specifications).length > 0 ? JSON.stringify(specifications) : null : null);\n  formData.append(\"category\", category);\n  formData.append(\"manufacturer\", manufacturer);\n  formData.append(\"video\", machine.video)\n  formData.append('folheto', files.folheto)\n  formData.append('manual', files.manual)\n  const machineFilesKeys = Object.keys(machineFiles);\n  machineFilesKeys.forEach(mkey => {\n    formData.append(\"machines\", machineFiles[mkey]);\n  });\n  formData.append(\"sewingType\", sewingFile);\n  const prodRefFilesKeys = Object.keys(prodRefFiles);\n  prodRefFilesKeys.forEach(prfkey => {\n    formData.append(\"productReferences\", prodRefFiles[prfkey]);\n  });\n\n  setApi()\n    .put(\"/machine/\" + id, formData)\n    .then(response => {\n      cb(null, response.data);\n    })\n    .catch(err => {\n      cb(err.response ? err.response.data : err.toString());\n    });\n}\n\nexport function addMachine(\n  machine,\n  machineFiles,\n  sewingTypeFile,\n  refProdFiles,\n  files,\n  cb\n) {\n  const formData = new FormData();\n  const machineFilesKeys = Object.keys(machineFiles);\n  let hasError = [false, false, false];\n  machineFilesKeys.forEach(mkey => {\n    hasError[0] = !validateImage(\n      [\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"],\n      10000,\n      machineFiles[mkey]\n    );\n    formData.append(\"machines\", machineFiles[mkey]);\n  });\n\n  const refProdFilesKey = Object.keys(refProdFiles);\n  refProdFilesKey.forEach(rfKey => {\n    hasError[1] = !validateImage(\n      [\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"],\n      10000,\n      refProdFiles[rfKey]\n    );\n\n    formData.append(\"productReferences\", refProdFiles[rfKey]);\n  });\n\n  hasError[2] = !validateImage(\n    [\"png\", \"jpg\", \"jpeg\", \"svg\", \"gif\", \"webp\"],\n    10000,\n    sewingTypeFile\n  );\n\n  if (hasError.includes(true)) {\n    return cb(\n      \"Você precisa subir imagens png, jpg, jpeg, svg, gif, webp com no máximo 10MB\"\n    );\n  }\n\n  const fieldError = fieldValidation({\n    nome: machine.name,\n    fabricante: machine.manufacturer,\n    subtítulo: machine.description,\n    categoria: machine.category,\n    características: machine.mainFeatures\n  });\n  if (fieldError.return) {\n\n    formData.append(\"name\", machine.name);\n    formData.append(\"manufacturer\", machine.manufacturer);\n    formData.append(\"description\", machine.description);\n    formData.append(\"category\", machine.category);\n    formData.append(\"mainFeatures\", machine.mainFeatures);\n    formData.append(\"specifications\", JSON.stringify(machine.specifications));\n    formData.append(\"video\", machine.video)\n    formData.append('folheto', files.folheto)\n    formData.append('manual', files.manual)\n\n    setApi()\n      .post(`machine`, formData)\n      .then(response => {\n        cb(null, response.data);\n      })\n      .catch(err => {\n        cb(err.response ? err.response.data : err.toString());\n      });\n  } else {\n    return cb(`${fieldError.message} ${fieldError.field}`);\n  }\n}\n\nexport function deleteMachine(id, cb) {\n  setApi()\n    .delete(`/machine/${id}`)\n    .then(response => {\n      cb(null, response.data);\n    })\n    .catch(err => {\n      cb(err.response ? err.response.data : err.toString());\n    });\n}\n"]},"metadata":{},"sourceType":"module"}