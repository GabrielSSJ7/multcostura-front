{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport FileInput from \"../../utils/FileInput\";\nimport { Button } from \"../../../static/styled-components/base\";\nimport { getBannerFixed, saveBannerFixed, deleteBannerFixed } from \"../../../utils/banner\";\nimport { validateImage } from '../../../utils/images';\nimport imageNotFound from \"../../../static/images/image-404.jpg\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\nexport default function BannerFixed({\n  type\n}) {\n  const imageMessageError = `Extensão do arquivo enviado é inválido. Extensões permitidas ${process.env.imageExtensionPermitted.toString()}, com no máximo 10MB`;\n  const {\n    0: banner,\n    1: setBanner\n  } = useState(imageNotFound);\n  const {\n    0: bannerBase,\n    1: setBannerBase\n  } = useState(null);\n  const {\n    0: file,\n    1: setFile\n  } = useState(null);\n  const {\n    0: snackBar,\n    1: setSnackBar\n  } = useState({\n    result: \"success\",\n    open: false,\n    message: \"\"\n  });\n\n  function handleChange(e) {\n    if (validateImage(process.env.imageExtensionPermitted, 10000, e.target.files[0])) {\n      setBanner(URL.createObjectURL(e.target.files[0]));\n      setFile(e.target.files[0]);\n    } else {\n      setSnackBar({\n        open: true,\n        result: 'error',\n        message: imageMessageError\n      });\n    }\n  }\n\n  function handleClose() {\n    setSnackBar(_objectSpread({}, snackBar, {\n      open: false\n    }));\n  }\n\n  useEffect(() => {\n    function asynFunc() {\n      getBannerFixed(type, function (err, d) {\n        if (err) {\n          setSnackbar({\n            open: true,\n            result: \"error\",\n            message: err\n          });\n          return;\n        }\n\n        setBannerBase(d ? d : null);\n        setBanner(d ? d : imageNotFound);\n      });\n    }\n\n    asynFunc();\n    return () => {};\n  }, []);\n\n  function saveBanner() {\n    saveBannerFixed(type, file, function (err, r) {\n      if (err) {\n        setSnackBar({\n          open: true,\n          result: \"error\",\n          message: err\n        });\n        return;\n      }\n\n      setSnackBar({\n        open: true,\n        result: \"success\",\n        message: \"Banner salvo com sucesso!\"\n      });\n      setFile(null);\n    });\n  }\n\n  function deleteBanner() {\n    deleteBannerFixed(type, function (err, r) {\n      if (err) {\n        setSnackBar({\n          open: true,\n          result: \"error\",\n          message: err\n        });\n        return;\n      }\n\n      setSnackBar({\n        open: true,\n        result: \"success\",\n        message: \"Banner excluido com sucesso!\"\n      });\n      setFile(null);\n      setBanner(imageNotFound);\n    });\n  }\n\n  return __jsx(Column, null, __jsx(\"div\", {\n    onClick: () => location.reload(),\n    className: \"arrow-back\",\n    style: {\n      background: \"#960d03\",\n      borderRadius: \"5px\",\n      padding: \"5px\",\n      maxWidth: \"60px\",\n      marginLeft: \"10px\",\n      marginBottom: \"5px\",\n      display: 'flex',\n      flexDirection: \"row\"\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: faArrowLeft,\n    style: {\n      color: \"white\"\n    }\n  }), __jsx(\"span\", {\n    style: {\n      color: \"white\"\n    }\n  }, \"Voltar\")), __jsx(\"style\", null, `  \n\n            .arrow-back {\n              transition: .5s;\n            }\n\n            .arrow-back:hover {\n              cursor: pointer;\n              opacity: .8;\n            }\n          `), __jsx(Row, null, __jsx(Wrapper, null, banner != imageNotFound ? __jsx(BtnDelete, {\n    onClick: deleteBanner\n  }, \"Excluir banner\") : \"\", __jsx(Snackbar, {\n    open: snackBar.open,\n    autoHideDuration: 2500,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    severity: snackBar.result\n  }, snackBar.message)), __jsx(Slide, {\n    src: banner\n  }))), __jsx(Row, null, __jsx(FileInput, {\n    handleChange: handleChange,\n    labelInputFile: \"Enviar imagem\",\n    id: \"bannerFixed\",\n    name: \"bannerFixed\",\n    labelWidth: \"200px\",\n    labelHeight: \"80px\",\n    maxWidth: \"100px\",\n    file: file,\n    cleanFileInput: () => {\n      setFile(null);\n      setBanner(bannerBase ? bannerBase : imageNotFound);\n    }\n  })), __jsx(Row, {\n    style: {\n      justifyContent: \"center\"\n    }\n  }, __jsx(Button, {\n    style: {\n      width: \"50%\"\n    },\n    onClick: () => saveBanner()\n  }, \"Salvar\")));\n}\nconst BtnDelete = styled.div.withConfig({\n  displayName: \"BannerFixed__BtnDelete\",\n  componentId: \"sc-1dgf4pc-0\"\n})([\"background:#960d03;padding:5px;position:absolute;z-index:9;left:10px;top:0;cursor:pointer;color:white;text-transform:uppercase;font-size:0.8rem;border-radius:5px;transition:0.3s;:hover{opacity:0.9;padding:5px 6px;}\"]);\nconst Column = styled.div.withConfig({\n  displayName: \"BannerFixed__Column\",\n  componentId: \"sc-1dgf4pc-1\"\n})([\"display:flex;flex-direction:column;\"]);\nconst Row = styled.div.withConfig({\n  displayName: \"BannerFixed__Row\",\n  componentId: \"sc-1dgf4pc-2\"\n})([\"display:flex;justify-content:center;\"]);\nconst Wrapper = styled.div.withConfig({\n  displayName: \"BannerFixed__Wrapper\",\n  componentId: \"sc-1dgf4pc-3\"\n})([\"width:100%;height:\", \";overflow:hidden;display:-webkit-box;position:relative;height:400px;\"], props => props.height);\nconst Slide = styled.div.withConfig({\n  displayName: \"BannerFixed__Slide\",\n  componentId: \"sc-1dgf4pc-4\"\n})([\"background-image:url('\", \"');background-size:cover;height:400px;width:100%;background-position:center;background-repeat:no-repeat;width:\", \";height:\", \";transform:translateX(\", \"px);transition:transform 0.4s ease-in-out;position:relative;\"], props => props.src, props => props.width, props => props.height, props => props.translate);","map":null,"metadata":{},"sourceType":"module"}