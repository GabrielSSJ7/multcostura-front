{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Router } from \"../routes\";\nimport setApi from \"../src/api\";\nimport Template from \"../src/components/templates/Admin\";\nimport cookies from \"next-cookies\";\nimport logo from \"../src/static/images/logo-colorido.png\";\nimport InputMask from \"react-input-mask\";\nconst reactCtx = React.createContext({});\nexport default function Login() {\n  const ctx = useContext(reactCtx);\n  useEffect(() => {\n    const {\n      user\n    } = cookies(ctx);\n    if (user) Router.push(\"/admin/home\");\n  }, []);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    message: {\n      show: false,\n      text: \"\"\n    },\n    login: \"\",\n    password: \"\"\n  });\n\n  function login() {\n    const {\n      login,\n      password\n    } = state;\n\n    if (!login) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar um e-mail ou cpf\"\n        }\n      }));\n    } else if (!password) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar a senha\"\n        }\n      }));\n    } else {\n      setApi().post(\"/user/auth\", {\n        login: state.login,\n        password: state.password\n      }).then(response => {\n        document.cookie = `user=${JSON.stringify(response.data)}`;\n        Router.pushRoute(\"/admin/home\");\n      }).catch(err => {\n        setState(_objectSpread({}, state, {\n          message: {\n            show: true,\n            text: err.response.data\n          }\n        }));\n      });\n    }\n  }\n\n  function _handleKeyDown(e) {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  }\n\n  return __jsx(Template, {\n    style: {\n      display: \"flex\"\n    }\n  }, __jsx(Body, null, __jsx(LoginContainer, null, __jsx(\"div\", null, __jsx(Image, {\n    src: logo\n  })), __jsx(\"hr\", null), __jsx(Text, null, \"E-mail/CPF:\"), __jsx(InputMask, {\n    style: {\n      flex: 1\n    },\n    placeholder: \"E-mail ou CPF\",\n    onChange: e => setState(_objectSpread({}, state, {\n      login: e.target.value\n    })),\n    onKeyDown: _handleKeyDown,\n    mask: \"999.999.999-99\",\n    maskChar: \" \",\n    className: \"form-control\"\n  }), __jsx(Text, null, \"Senha:\"), __jsx(Input, {\n    type: \"password\",\n    placeholder: \"Senha\",\n    onChange: e => setState(_objectSpread({}, state, {\n      password: e.target.value\n    })),\n    onKeyDown: _handleKeyDown\n  }), __jsx(\"hr\", null), __jsx(Button, {\n    onClick: () => login()\n  }, \"Entrar\")), __jsx(DivMessage, {\n    show: state.message.show ? \"1\" : \"0\"\n  }, __jsx(Text, {\n    style: {\n      textAlign: \"center\"\n    }\n  }, state.message.text))));\n}\nimport styled from \"styled-components\";\nexport const Body = styled.div.withConfig({\n  displayName: \"login__Body\",\n  componentId: \"sc-6y8xqa-0\"\n})([\"display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;height:100vh;.form-control{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;}\"]);\nexport const LoginContainer = styled.div.withConfig({\n  displayName: \"login__LoginContainer\",\n  componentId: \"sc-6y8xqa-1\"\n})([\"background-color:white;width:250px;display:flex;flex-direction:column;padding:15px;border:0.5px solid lightgrey;\"]);\nexport const Title = styled.p.withConfig({\n  displayName: \"login__Title\",\n  componentId: \"sc-6y8xqa-2\"\n})([\"font-size:22px;font-weight:bold;text-align:center;margin:0;\"]);\nexport const Input = styled.input.withConfig({\n  displayName: \"login__Input\",\n  componentId: \"sc-6y8xqa-3\"\n})([\"width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;\"]);\nexport const Text = styled.p.withConfig({\n  displayName: \"login__Text\",\n  componentId: \"sc-6y8xqa-4\"\n})([\"color:grey;\"]);\nexport const Button = styled.button.withConfig({\n  displayName: \"login__Button\",\n  componentId: \"sc-6y8xqa-5\"\n})([\"width:100%;background-color:#960d03;color:white;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer;\"]);\nexport const DivMessage = styled.div.withConfig({\n  displayName: \"login__DivMessage\",\n  componentId: \"sc-6y8xqa-6\"\n})([\"padding:10px;margin-top:15px;background:#ff5647;width:250px;border-radius:10px;p{color:white !important;}opacity:\", \";transition:0.5s;\"], props => props.show);\nexport const Image = styled.img.withConfig({\n  displayName: \"login__Image\",\n  componentId: \"sc-6y8xqa-7\"\n})([\"width:50%;display:block;margin:auto;\"]);","map":null,"metadata":{},"sourceType":"module"}