{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport setApi from '../../api';\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport { Row, Column } from '../../static/styled-components/base';\nimport loading from '../../static/images/loading.gif';\nexport default function Form() {\n  const {\n    0: snackBar,\n    1: setSnackBar\n  } = useState({\n    result: \"success\",\n    open: false,\n    message: \"\"\n  });\n  const {\n    0: form,\n    1: setForm\n  } = useState({\n    nome: '',\n    endereco: '',\n    bairro: '',\n    cidade: '',\n    uf: '',\n    tel: '',\n    mensagem: ''\n  });\n  const {\n    0: visLoad,\n    1: setVisLoad\n  } = useState(false);\n\n  function handleChange(e) {\n    setForm(_objectSpread({}, form, {\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  function sendMail() {\n    setVisLoad(true);\n    const val = validateFields();\n\n    if (val.ok) {\n      setApi().post('/email', _objectSpread({}, form)).then(response => {\n        setVisLoad(false);\n        cleanForm();\n        setSnackBar({\n          open: true,\n          result: 'success',\n          message: 'E-mail enviado com sucesso, em breve retornaremos o seu contato!'\n        });\n      }).catch(err => {\n        setVisLoad(false);\n        console.log('error => ', err);\n      });\n    } else {\n      setVisLoad(false);\n      setSnackBar({\n        open: true,\n        result: 'error',\n        message: val.message\n      });\n    }\n  }\n\n  function cleanForm() {\n    setForm({\n      nome: '',\n      endereco: '',\n      bairro: '',\n      cidade: '',\n      uf: '',\n      tel: '',\n      mensagem: ''\n    });\n  }\n\n  function validateFields() {\n    const keys = Object.keys(form);\n    let ok = true;\n    let emptyF = [];\n\n    for (let k in keys) {\n      if (!form[keys[k]]) {\n        emptyF.push(keys[k].toUpperCase());\n        ok = false;\n      }\n    }\n\n    return {\n      ok,\n      message: `Campo${emptyF.length > 1 ? 's' : ''} ${emptyF.toString().replace(/\\W+/g, ', ')} vazios`\n    };\n  }\n\n  function handleClose() {\n    setSnackBar(_objectSpread({}, snackBar, {\n      open: false\n    }));\n  }\n\n  return __jsx(React.Fragment, null, visLoad ? __jsx(Column, {\n    flex: \"1\",\n    jc: \"center\",\n    ait: \"center\"\n  }, __jsx(\"img\", {\n    src: loading,\n    style: {\n      width: '64px',\n      height: '64px'\n    }\n  })) : __jsx(Column, {\n    flex: \"1\",\n    style: {\n      minWidth: \"300px\",\n      marginBottom: \"20px\"\n    }\n  }, __jsx(Snackbar, {\n    open: snackBar.open,\n    autoHideDuration: 4500,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    severity: snackBar.result\n  }, snackBar.message)), __jsx(Row, null, __jsx(Input, {\n    placeholder: \"Nome:\",\n    name: \"nome\",\n    onChange: handleChange,\n    value: form.nome\n  })), __jsx(Row, null, __jsx(Input, {\n    placeholder: \"Endere\\xE7o:\",\n    name: \"endereco\",\n    onChange: handleChange,\n    value: form.endereco\n  })), __jsx(Row, null, __jsx(Input, {\n    placeholder: \"Bairro:\",\n    style: {\n      marginRight: \"5px\",\n      flex: 2\n    },\n    name: \"bairro\",\n    onChange: handleChange,\n    value: form.bairro\n  }), __jsx(Input, {\n    placeholder: \"Cidade:\",\n    style: {\n      flex: 1\n    },\n    name: \"cidade\",\n    onChange: handleChange,\n    value: form.cidade\n  })), __jsx(Row, null, __jsx(Input, {\n    placeholder: \"UF:\",\n    style: {\n      marginRight: \"5px\",\n      flex: 1\n    },\n    name: \"uf\",\n    onChange: handleChange,\n    value: form.uf\n  }), __jsx(Input, {\n    placeholder: \"Tel:\",\n    style: {\n      flex: 2\n    },\n    name: \"tel\",\n    onChange: handleChange,\n    value: form.tel\n  })), __jsx(Row, null, __jsx(Textarea, {\n    placeholder: \"Mensagem\",\n    rows: 8,\n    name: \"mensagem\",\n    onChange: handleChange,\n    value: form.mensagem\n  })), __jsx(Row, {\n    style: {\n      justifyContent: \"flex-end\"\n    }\n  }, __jsx(Button, {\n    onClick: cleanForm\n  }, \"Limpar\"), __jsx(Button, {\n    onClick: sendMail,\n    style: {\n      background: '#242873',\n      marginLeft: \"5px\"\n    }\n  }, \"Enviar\"))));\n}\nconst Button = styled.span.withConfig({\n  displayName: \"Form__Button\",\n  componentId: \"d8o6xj-0\"\n})([\"height:36px;background:#B9B9B9 0% 0% no-repeat padding-box;border-radius:4px;text-align:left;font-family:Segoe UI;font-size:18px;letter-spacing:0;color:#FFFFFF;opacity:1;padding-top:5px;padding-left:15px;padding-right:15px;cursor:pointer;transition:.2s;:hover{opacity:.8;}\"]);\nconst Input = styled.input.withConfig({\n  displayName: \"Form__Input\",\n  componentId: \"d8o6xj-1\"\n})([\"background:#ECECEC 0% 0% no-repeat padding-box;border:none;height:38px;border-radius:5px;opacity:1;width:100%;margin-bottom:5px;padding-bottom:0;padding-top:15px;padding-left:10px;outline:none;\"]);\nconst Textarea = styled.textarea.withConfig({\n  displayName: \"Form__Textarea\",\n  componentId: \"d8o6xj-2\"\n})([\"background:#ECECEC 0% 0% no-repeat padding-box;border:none;border-radius:5px;opacity:1;width:100%;margin-bottom:5px;padding-bottom:0;padding-top:15px;padding-left:10px;outline:none;resize:none;\"]);","map":null,"metadata":{},"sourceType":"module"}