{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Router } from \"../routes\";\nimport setApi from \"../src/api\";\nimport Template from \"../src/components/templates/Admin\";\nimport cookies from \"next-cookies\";\nimport logo from \"../src/static/images/logo-colorido.png\";\nimport InputMask from \"react-input-mask\";\nconst reactCtx = React.createContext({});\nexport default function Login() {\n  const ctx = useContext(reactCtx);\n  useEffect(() => {\n    const {\n      user\n    } = cookies(ctx);\n    if (user) Router.push(\"/admin/home\");\n  }, []);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    message: {\n      show: false,\n      text: \"\"\n    },\n    login: \"\",\n    password: \"\"\n  });\n\n  function login() {\n    const {\n      login,\n      password\n    } = state;\n\n    if (!login) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar um e-mail ou cpf\"\n        }\n      }));\n    } else if (!password) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar a senha\"\n        }\n      }));\n    } else {\n      setApi().post(\"/user/auth\", {\n        login: state.login,\n        password: state.password\n      }).then(response => {\n        document.cookie = `user=${JSON.stringify(response.data)}`;\n        Router.pushRoute(\"/admin/home\");\n      }).catch(err => {\n        setState(_objectSpread({}, state, {\n          message: {\n            show: true,\n            text: err.response.data\n          }\n        }));\n      });\n    }\n  }\n\n  function _handleKeyDown(e) {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  }\n\n  return __jsx(Template, {\n    style: {\n      display: \"flex\"\n    }\n  }, __jsx(Body, null, __jsx(LoginContainer, null, __jsx(\"div\", null, __jsx(Image, {\n    src: logo\n  })), __jsx(\"hr\", null), __jsx(Text, null, \"E-mail/CPF:\"), __jsx(InputMask, {\n    style: {\n      flex: 1\n    },\n    placeholder: \"E-mail ou CPF\",\n    onChange: e => setState(_objectSpread({}, state, {\n      login: e.target.value\n    })),\n    onKeyDown: _handleKeyDown,\n    mask: \"999.999.999-99\",\n    maskChar: \" \",\n    className: \"form-control\"\n  }), __jsx(Text, null, \"Senha:\"), __jsx(Input, {\n    type: \"password\",\n    placeholder: \"Senha\",\n    onChange: e => setState(_objectSpread({}, state, {\n      password: e.target.value\n    })),\n    onKeyDown: _handleKeyDown\n  }), __jsx(\"hr\", null), __jsx(Button, {\n    onClick: () => login()\n  }, \"Entrar\")), __jsx(DivMessage, {\n    show: state.message.show ? \"1\" : \"0\"\n  }, __jsx(Text, {\n    style: {\n      textAlign: \"center\"\n    }\n  }, state.message.text))));\n}\nimport styled from \"styled-components\";\nexport const Body = styled.div.withConfig({\n  displayName: \"login__Body\",\n  componentId: \"sc-6y8xqa-0\"\n})([\"display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;height:100vh;.form-control{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;}\"]);\nexport const LoginContainer = styled.div.withConfig({\n  displayName: \"login__LoginContainer\",\n  componentId: \"sc-6y8xqa-1\"\n})([\"background-color:white;width:250px;display:flex;flex-direction:column;padding:15px;border:0.5px solid lightgrey;\"]);\nexport const Title = styled.p.withConfig({\n  displayName: \"login__Title\",\n  componentId: \"sc-6y8xqa-2\"\n})([\"font-size:22px;font-weight:bold;text-align:center;margin:0;\"]);\nexport const Input = styled.input.withConfig({\n  displayName: \"login__Input\",\n  componentId: \"sc-6y8xqa-3\"\n})([\"width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;\"]);\nexport const Text = styled.p.withConfig({\n  displayName: \"login__Text\",\n  componentId: \"sc-6y8xqa-4\"\n})([\"color:grey;\"]);\nexport const Button = styled.button.withConfig({\n  displayName: \"login__Button\",\n  componentId: \"sc-6y8xqa-5\"\n})([\"width:100%;background-color:#960d03;color:white;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer;\"]);\nexport const DivMessage = styled.div.withConfig({\n  displayName: \"login__DivMessage\",\n  componentId: \"sc-6y8xqa-6\"\n})([\"padding:10px;margin-top:15px;background:#ff5647;width:250px;border-radius:10px;p{color:white !important;}opacity:\", \";transition:0.5s;\"], props => props.show);\nexport const Image = styled.img.withConfig({\n  displayName: \"login__Image\",\n  componentId: \"sc-6y8xqa-7\"\n})([\"width:50%;display:block;margin:auto;\"]);","map":{"version":3,"sources":["C:/Users/Gluz/Projects/web/multcostura/multcostura-web/pages/login.js"],"names":["React","useState","useEffect","useContext","Router","setApi","Template","cookies","logo","InputMask","reactCtx","createContext","Login","ctx","user","push","state","setState","message","show","text","login","password","post","then","response","document","cookie","JSON","stringify","data","pushRoute","catch","err","_handleKeyDown","e","key","display","flex","target","value","textAlign","styled","Body","div","LoginContainer","Title","p","Input","input","Text","Button","button","DivMessage","props","Image","img"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Router } from \"../routes\";\nimport setApi from \"../src/api\";\nimport Template from \"../src/components/templates/Admin\";\n\nimport cookies from \"next-cookies\";\nimport logo from \"../src/static/images/logo-colorido.png\";\nimport InputMask from \"react-input-mask\";\n\nconst reactCtx = React.createContext({});\n\nexport default function Login() {\n  const ctx = useContext(reactCtx);\n  useEffect(() => {\n    const { user } = cookies(ctx);\n    if (user) Router.push(\"/admin/home\");\n  }, []);\n  const [state, setState] = useState({\n    message: {\n      show: false,\n      text: \"\"\n    },\n    login: \"\",\n    password: \"\"\n  });\n  function login() {\n    const { login, password } = state;\n    if (!login) {\n      setState({\n        ...state,\n        message: { show: true, text: \"Você precisa digitar um e-mail ou cpf\" }\n      });\n    } else if (!password) {\n      setState({\n        ...state,\n        message: { show: true, text: \"Você precisa digitar a senha\" }\n      });\n    } else {\n      setApi()\n        .post(\"/user/auth\", {\n          login: state.login,\n          password: state.password\n        })\n        .then(response => {\n          document.cookie = `user=${JSON.stringify(response.data)}`;\n          Router.pushRoute(\"/admin/home\");\n        })\n        .catch(err => {\n          setState({\n            ...state,\n            message: { show: true, text: err.response.data }\n          });\n        });\n    }\n  }\n\n  function _handleKeyDown(e) {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  }\n  return (\n    <Template style={{ display: \"flex\" }}>\n      <Body>\n        <LoginContainer>\n          <div>\n            <Image src={logo} />\n          </div>\n          <hr />\n          <Text>E-mail/CPF:</Text>\n        \n          <InputMask\n            style={{ flex: 1 }}\n            placeholder=\"E-mail ou CPF\"\n            onChange={e => setState({ ...state, login: e.target.value })}\n            onKeyDown={_handleKeyDown}\n            mask=\"999.999.999-99\"\n            maskChar=\" \"\n            className=\"form-control\"\n          />\n          <Text>Senha:</Text>\n          <Input\n            type=\"password\"\n            placeholder=\"Senha\"\n            onChange={e => setState({ ...state, password: e.target.value })}\n            onKeyDown={_handleKeyDown}\n          />\n          <hr />\n          <Button onClick={() => login()}>Entrar</Button>\n        </LoginContainer>\n\n        <DivMessage show={state.message.show ? \"1\" : \"0\"}>\n          <Text style={{ textAlign: \"center\" }}>{state.message.text}</Text>\n        </DivMessage>\n      </Body>\n    </Template>\n  );\n}\n\nimport styled from \"styled-components\";\n\nexport const Body = styled.div`\n  display: flex;\n  flex: 1;\n\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  .form-control {\n     width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  }\n`;\n\nexport const LoginContainer = styled.div`\n  background-color: white;\n  width: 250px;\n  display: flex;\n  flex-direction: column;\n  padding: 15px;\n  border: 0.5px solid lightgrey;\n`;\n\nexport const Title = styled.p`\n  font-size: 22px;\n  font-weight: bold;\n  text-align: center;\n  margin: 0;\n`;\n\nexport const Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\n\nexport const Text = styled.p`\n  color: grey;\n`;\n\nexport const Button = styled.button`\n  width: 100%;\n  background-color: #960d03;\n  color: white;\n  padding: 14px 20px;\n  margin: 8px 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n`;\n\nexport const DivMessage = styled.div`\n  padding: 10px;\n  margin-top: 15px;\n  background: #ff5647;\n  width: 250px;\n  border-radius: 10px;\n  p {\n    color: white !important;\n  }\n  opacity: ${props => props.show};\n  transition: 0.5s;\n`;\n\nexport const Image = styled.img`\n  width: 50%;\n  display: block;\n  margin: auto;\n`;\n"]},"metadata":{},"sourceType":"module"}