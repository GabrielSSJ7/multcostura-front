{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ti/Projects/WebProjects/multcostura/web-multcostura/pages/login.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Router } from \"../routes\";\nimport setApi from \"../src/api\";\nimport Template from \"../src/components/templates/Admin\";\nimport cookies from \"next-cookies\";\nimport logo from \"../src/static/images/logo-colorido.png\";\nvar reactCtx = React.createContext({});\nexport default function Login() {\n  var ctx = useContext(reactCtx);\n  useEffect(function () {\n    var _cookies = cookies(ctx),\n        user = _cookies.user;\n\n    if (user) Router.push(\"/admin/home\");\n  }, []);\n\n  var _useState = useState({\n    message: {\n      show: false,\n      text: \"\"\n    },\n    login: \"\",\n    password: \"\"\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  function login() {\n    var login = state.login,\n        password = state.password;\n\n    if (!login) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar um e-mail ou cpf\"\n        }\n      }));\n    } else if (!password) {\n      setState(_objectSpread({}, state, {\n        message: {\n          show: true,\n          text: \"Você precisa digitar a senha\"\n        }\n      }));\n    } else {\n      setApi().post(\"/user/auth\", {\n        login: state.login,\n        password: state.password\n      }).then(function (response) {\n        document.cookie = \"user=\".concat(_JSON$stringify(response.data));\n        Router.pushRoute(\"/admin/home\");\n      })[\"catch\"](function (err) {\n        setState(_objectSpread({}, state, {\n          message: {\n            show: true,\n            text: err.response.data\n          }\n        }));\n      });\n    }\n  }\n\n  function _handleKeyDown(e) {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  }\n\n  return __jsx(Template, {\n    style: {\n      display: \"flex\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, __jsx(Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(LoginContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, __jsx(Image, {\n    src: logo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"E-mail/CPF:\"), __jsx(Input, {\n    placeholder: \"E-mail ou CPF\",\n    onChange: function onChange(e) {\n      return setState(_objectSpread({}, state, {\n        login: e.target.value\n      }));\n    },\n    onKeyDown: _handleKeyDown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Senha:\"), __jsx(Input, {\n    type: \"password\",\n    placeholder: \"Senha\",\n    onChange: function onChange(e) {\n      return setState(_objectSpread({}, state, {\n        password: e.target.value\n      }));\n    },\n    onKeyDown: _handleKeyDown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), __jsx(Button, {\n    onClick: function onClick() {\n      return login();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Entrar\")), __jsx(DivMessage, {\n    show: state.message.show ? \"1\" : \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(Text, {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, state.message.text))));\n}\nimport styled from \"styled-components\";\nexport var Body = styled.div.withConfig({\n  displayName: \"login__Body\",\n  componentId: \"sc-6y8xqa-0\"\n})([\"display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;height:100vh;\"]);\nexport var LoginContainer = styled.div.withConfig({\n  displayName: \"login__LoginContainer\",\n  componentId: \"sc-6y8xqa-1\"\n})([\"background-color:white;width:250px;display:flex;flex-direction:column;padding:15px;border:0.5px solid lightgrey;\"]);\nexport var Title = styled.p.withConfig({\n  displayName: \"login__Title\",\n  componentId: \"sc-6y8xqa-2\"\n})([\"font-size:22px;font-weight:bold;text-align:center;margin:0;\"]);\nexport var Input = styled.input.withConfig({\n  displayName: \"login__Input\",\n  componentId: \"sc-6y8xqa-3\"\n})([\"width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;\"]);\nexport var Text = styled.p.withConfig({\n  displayName: \"login__Text\",\n  componentId: \"sc-6y8xqa-4\"\n})([\"color:grey;\"]);\nexport var Button = styled.button.withConfig({\n  displayName: \"login__Button\",\n  componentId: \"sc-6y8xqa-5\"\n})([\"width:100%;background-color:#960d03;color:white;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer;\"]);\nexport var DivMessage = styled.div.withConfig({\n  displayName: \"login__DivMessage\",\n  componentId: \"sc-6y8xqa-6\"\n})([\"padding:10px;margin-top:15px;background:#ff5647;width:250px;border-radius:10px;p{color:white !important;}opacity:\", \";transition:0.5s;\"], function (props) {\n  return props.show;\n});\nexport var Image = styled.img.withConfig({\n  displayName: \"login__Image\",\n  componentId: \"sc-6y8xqa-7\"\n})([\"width:50%;display:block;margin:auto;\"]);","map":{"version":3,"sources":["/home/ti/Projects/WebProjects/multcostura/web-multcostura/pages/login.js"],"names":["React","useState","useEffect","useContext","Router","setApi","Template","cookies","logo","reactCtx","createContext","Login","ctx","user","push","message","show","text","login","password","state","setState","post","then","response","document","cookie","data","pushRoute","err","_handleKeyDown","e","key","display","target","value","textAlign","styled","Body","div","LoginContainer","Title","p","Input","input","Text","Button","button","DivMessage","props","Image","img"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Router } from \"../routes\";\nimport setApi from \"../src/api\";\nimport Template from \"../src/components/templates/Admin\";\n\nimport cookies from \"next-cookies\";\nimport logo from \"../src/static/images/logo-colorido.png\";\n\nconst reactCtx = React.createContext({});\n\nexport default function Login() {\n  const ctx = useContext(reactCtx);\n  useEffect(() => {\n    const { user } = cookies(ctx);\n    if (user) Router.push(\"/admin/home\");\n  }, []);\n  const [state, setState] = useState({\n    message: {\n      show: false,\n      text: \"\"\n    },\n    login: \"\",\n    password: \"\"\n  });\n  function login() {\n    const { login, password } = state;\n    if (!login) {\n      setState({\n        ...state,\n        message: { show: true, text: \"Você precisa digitar um e-mail ou cpf\" }\n      });\n    } else if (!password) {\n      setState({\n        ...state,\n        message: { show: true, text: \"Você precisa digitar a senha\" }\n      });\n    } else {\n      setApi()\n        .post(\"/user/auth\", {\n          login: state.login,\n          password: state.password\n        })\n        .then(response => {\n          document.cookie = `user=${JSON.stringify(response.data)}`;\n          Router.pushRoute(\"/admin/home\");\n        })\n        .catch(err => {\n          setState({\n            ...state,\n            message: { show: true, text: err.response.data }\n          });\n        });\n    }\n  }\n\n  function _handleKeyDown(e) {\n    if (e.key === \"Enter\") {\n      login();\n    }\n  }\n  return (\n    <Template style={{ display: \"flex\" }}>\n      <Body>\n        <LoginContainer>\n          <div>\n            <Image src={logo} />\n          </div>\n          <hr />\n          <Text>E-mail/CPF:</Text>\n          <Input\n            placeholder=\"E-mail ou CPF\"\n            onChange={e => setState({ ...state, login: e.target.value })}\n            onKeyDown={_handleKeyDown}\n          />\n          <Text>Senha:</Text>\n          <Input\n            type=\"password\"\n            placeholder=\"Senha\"\n            onChange={e => setState({ ...state, password: e.target.value })}\n            onKeyDown={_handleKeyDown}\n          />\n          <hr />\n          <Button onClick={() => login()}>Entrar</Button>\n        </LoginContainer>\n\n        <DivMessage show={state.message.show ? \"1\" : \"0\"}>\n          <Text style={{ textAlign: \"center\" }}>{state.message.text}</Text>\n        </DivMessage>\n      </Body>\n    </Template>\n  );\n}\n\nimport styled from \"styled-components\";\n\nexport const Body = styled.div`\n  display: flex;\n  flex: 1;\n\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n`;\n\nexport const LoginContainer = styled.div`\n  background-color: white;\n  width: 250px;\n  display: flex;\n  flex-direction: column;\n  padding: 15px;\n  border: 0.5px solid lightgrey;\n`;\n\nexport const Title = styled.p`\n  font-size: 22px;\n  font-weight: bold;\n  text-align: center;\n  margin: 0;\n`;\n\nexport const Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\n\nexport const Text = styled.p`\n  color: grey;\n`;\n\nexport const Button = styled.button`\n  width: 100%;\n  background-color: #960d03;\n  color: white;\n  padding: 14px 20px;\n  margin: 8px 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n`;\n\nexport const DivMessage = styled.div`\n  padding: 10px;\n  margin-top: 15px;\n  background: #ff5647;\n  width: 250px;\n  border-radius: 10px;\n  p {\n    color: white !important;\n  }\n  opacity: ${props => props.show};\n  transition: 0.5s;\n`;\n\nexport const Image = styled.img`\n  width: 50%;\n  display: block;\n  margin: auto;\n`;\n"]},"metadata":{},"sourceType":"module"}