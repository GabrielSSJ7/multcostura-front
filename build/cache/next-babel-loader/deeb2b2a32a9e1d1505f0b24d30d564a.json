{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Button } from \"../../../static/styled-components/base\";\nimport { Creators as ManufacturerCreators } from \"../../../ducks/manufacturer\";\nimport { Creators as UtilsCreators } from \"../../../ducks/utils\";\nimport { getManufacturers, deleteManufacturer, editManufacturer } from \"../../../utils/manufacturers\";\nimport Upload from \"../../utils/Upload\";\nimport Message from \"../../utils/Message\";\nimport TextField from \"@material-ui/core/TextField\";\nimport TextArea from \"@material-ui/core/TextareaAutosize\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nexport default function manufacturers() {\n  const {\n    message,\n    messageType,\n    messageColor\n  } = useSelector(state => state.Utils);\n  const {\n    manufacturers\n  } = useSelector(state => state.Manufacturer);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: diag,\n    1: setDiag\n  } = useState(false);\n  const {\n    0: manufacturerToEdit,\n    1: setManufacturerToEdit\n  } = useState({});\n  const {\n    0: file,\n    1: setFile\n  } = useState(null);\n  const {\n    0: key,\n    1: setKey\n  } = useState(_Date$now());\n  const dispatch = useDispatch();\n\n  function handleChange(event) {\n    const file = event.target.files[0];\n\n    if (file) {\n      setFile(file);\n    } else {\n      setFile(null);\n    }\n  }\n\n  useEffect(() => {\n    function _getManufacturers() {\n      getManufacturers(function (err, mans) {\n        if (err) {\n          dispatch(UtilsCreators.changeMessage());\n          dispatch(UtilsCreators.changeMessageType(false));\n          dispatch(UtilsCreators.changeMessageColor(\"red\"));\n          return;\n        }\n\n        dispatch(ManufacturerCreators.loadManufacturers(mans));\n      });\n    }\n\n    _getManufacturers();\n  }, []);\n\n  function handleClose() {\n    setDiag(false);\n    setManufacturerToEdit({});\n  }\n\n  function handleOpen(manufacturer) {\n    setManufacturerToEdit(manufacturer);\n    setDiag(true);\n  }\n\n  function editMan(man) {\n    editManufacturer(man.id, _objectSpread({}, man), function (err, data) {\n      if (err) {\n        dispatch(UtilsCreators.changeMessage(err));\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n        handleClose();\n        return;\n      }\n\n      getManufacturers(function (err, mans) {\n        if (err) {\n          dispatch(UtilsCreators.changeMessage(err));\n          dispatch(UtilsCreators.changeMessageType(false));\n          dispatch(UtilsCreators.changeMessageColor(\"red\"));\n          return;\n        }\n\n        dispatch(CategoriesCreators.loadManufacturers(mans));\n      });\n      dispatch(UtilsCreators.changeMessage(\"Editado com sucesso\"));\n      dispatch(UtilsCreators.changeMessageType(true));\n      dispatch(UtilsCreators.changeMessageColor(\"green\"));\n      handleClose();\n      setVisible(true);\n    });\n  }\n\n  function delMan(id) {\n    deleteManufacturer(id, function (err, data) {\n      if (err) {\n        dispatch(UtilsCreators.changeMessage(err));\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n        return;\n      }\n\n      getManufacturers(function (err, mans) {\n        dispatch(ManufacturerCreators.loadManufacturers(mans));\n      });\n      dispatch(UtilsCreators.changeMessage(\"Deletado com sucesso\"));\n      dispatch(UtilsCreators.changeMessageType(true));\n      dispatch(UtilsCreators.changeMessageColor(\"green\"));\n      setVisible(true);\n    });\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Lista de fabricantes\"), __jsx(\"div\", null, __jsx(Dialog, {\n    open: diag,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\"\n  }, __jsx(DialogTitle, {\n    id: \"form-dialog-title\"\n  }, \"Editar categoria\"), __jsx(DialogContent, null, __jsx(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Nome\",\n    type: \"text\",\n    value: manufacturerToEdit.name,\n    onChange: e => setManufacturerToEdit(_objectSpread({}, manufacturerToEdit, {\n      name: e.target.value\n    })),\n    fullWidth: true\n  }), __jsx(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"description\",\n    label: \"Descri\\xE7\\xE3o\",\n    type: \"text\",\n    value: manufacturerToEdit.description,\n    onChange: e => setManufacturerToEdit(_objectSpread({}, manufacturerToEdit, {\n      description: e.target.value\n    })),\n    fullWidth: true\n  }), __jsx(ImageContainer, null, __jsx(Upload, {\n    id: \"editMan\",\n    file: file,\n    name: \"editMan\",\n    labelInputFile: \"Logo fabricante\",\n    imageURL: manufacturerToEdit.appIcon,\n    key: key\n  }))), __jsx(DialogActions, null, __jsx(Button, {\n    onClick: handleClose,\n    color: \"primary\"\n  }, \"Cancelar\"), __jsx(Button, {\n    onClick: () => editMan(manufacturerToEdit),\n    color: \"primary\"\n  }, \"Salvar\")))), __jsx(DivListCategories, null, manufacturers.map((manufacturer, id) => __jsx(ManufacturerContainer, {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    style: {\n      borderBottom: \"1px solid lightgrey\"\n    },\n    key: id\n  }, __jsx(ManufacturerContainer, {\n    flexDirection: \"column\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"column\"\n    }\n  }, __jsx(\"p\", {\n    style: {\n      fontWeight: \"200\"\n    }\n  }, \"Nome: \", manufacturer.name), __jsx(\"p\", {\n    style: {\n      fontWeight: \"200\"\n    }\n  }, \"Descri\\xE7\\xE3o: \", manufacturer.description), __jsx(\"p\", null, \"Logo:\", __jsx(\"span\", {\n    style: {\n      marginLeft: \"10px\"\n    }\n  }, __jsx(\"img\", {\n    src: manufacturer.appIcon,\n    style: {\n      width: \"120px\"\n    }\n  })))), __jsx(ManufacturerContainer, {\n    flexDirection: \"column\",\n    style: {\n      marginRight: \"10px\",\n      marginLeft: \"10px\"\n    }\n  }, __jsx(Button, {\n    onClick: () => handleOpen(manufacturer)\n  }, \"Editar\"), __jsx(Button, {\n    onClick: () => delMan(manufacturer.id)\n  }, \"Apagar\"))))), visible ? __jsx(Message, {\n    result: messageType,\n    color: messageColor,\n    message: message\n  }) : \"\");\n}\nexport const Hr = styled.hr.withConfig({\n  displayName: \"ListManufacturers__Hr\",\n  componentId: \"sc-31sht8-0\"\n})([\"width:50%;\"]);\nexport const Subcontainer = styled.div.withConfig({\n  displayName: \"ListManufacturers__Subcontainer\",\n  componentId: \"sc-31sht8-1\"\n})([\"padding:0 15px;\"]);\nexport const ImageContainer = styled.div.withConfig({\n  displayName: \"ListManufacturers__ImageContainer\",\n  componentId: \"sc-31sht8-2\"\n})([\"img{max-width:220px;display:block;margin:10px auto;}\"]);\nexport const DivListCategories = styled.div.withConfig({\n  displayName: \"ListManufacturers__DivListCategories\",\n  componentId: \"sc-31sht8-3\"\n})([\"max-height:550px;overflow:auto;::-webkit-scrollbar{width:10px;}::-webkit-scrollbar-track{background:#f1f1f1;}::-webkit-scrollbar-thumb{background:rgb(129,22,27);}::-webkit-scrollbar-thumb:hover{background:#555;}\"]);\nexport const ManufacturerContainer = styled.div.withConfig({\n  displayName: \"ListManufacturers__ManufacturerContainer\",\n  componentId: \"sc-31sht8-4\"\n})([\"display:flex;flex-direction:\", \";justify-content:\", \";\"], props => props.flexDirection, props => props.justifyContent);","map":{"version":3,"sources":["/home/ti/Projects/WebProjects/multcostura/web-multcostura/src/components/admin/manufacturers/ListManufacturers.jsx"],"names":["React","useState","useEffect","useContext","styled","useSelector","useDispatch","Button","Creators","ManufacturerCreators","UtilsCreators","getManufacturers","deleteManufacturer","editManufacturer","Upload","Message","TextField","TextArea","Dialog","DialogActions","DialogContent","DialogTitle","manufacturers","message","messageType","messageColor","state","Utils","Manufacturer","visible","setVisible","diag","setDiag","manufacturerToEdit","setManufacturerToEdit","file","setFile","key","setKey","dispatch","handleChange","event","target","files","_getManufacturers","err","mans","changeMessage","changeMessageType","changeMessageColor","loadManufacturers","handleClose","handleOpen","manufacturer","editMan","man","id","data","CategoriesCreators","delMan","color","name","e","value","description","appIcon","map","borderBottom","display","justifyContent","fontWeight","marginLeft","width","marginRight","Hr","hr","Subcontainer","div","ImageContainer","DivListCategories","ManufacturerContainer","props","flexDirection"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { Button } from \"../../../static/styled-components/base\";\nimport { Creators as ManufacturerCreators } from \"../../../ducks/manufacturer\";\nimport { Creators as UtilsCreators } from \"../../../ducks/utils\";\n\nimport {\n  getManufacturers,\n  deleteManufacturer,\n  editManufacturer\n} from \"../../../utils/manufacturers\";\nimport Upload from \"../../utils/Upload\";\n\nimport Message from \"../../utils/Message\";\nimport TextField from \"@material-ui/core/TextField\";\nimport TextArea from \"@material-ui/core/TextareaAutosize\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\n\nexport default function manufacturers() {\n  const { message, messageType, messageColor } = useSelector(\n    state => state.Utils\n  );\n  const { manufacturers } = useSelector(state => state.Manufacturer);\n  const [visible, setVisible] = useState(false);\n  const [diag, setDiag] = useState(false);\n  const [manufacturerToEdit, setManufacturerToEdit] = useState({});\n  const [file, setFile] = useState(null);\n  const [key, setKey] = useState(Date.now())\n  const dispatch = useDispatch();\n\n  function handleChange(event) {     \n    const file = event.target.files[0];\n    if (file) {\n      setFile(file);\n    } else {\n      setFile(null);\n    }\n  }\n\n  useEffect(() => {\n    function _getManufacturers() {\n      getManufacturers(function(err, mans) {\n        if (err) {\n          dispatch(UtilsCreators.changeMessage());\n          dispatch(UtilsCreators.changeMessageType(false));\n          dispatch(UtilsCreators.changeMessageColor(\"red\"));\n          return;\n        }\n        dispatch(ManufacturerCreators.loadManufacturers(mans));\n      });\n    }\n    _getManufacturers();\n  }, []);\n\n  function handleClose() {\n    setDiag(false);\n    setManufacturerToEdit({});\n  }\n\n  function handleOpen(manufacturer) {\n    setManufacturerToEdit(manufacturer);\n    setDiag(true);\n  }\n\n  function editMan(man) {\n    editManufacturer(man.id, { ...man }, function(err, data) {\n      if (err) {\n        dispatch(UtilsCreators.changeMessage(err));\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n        handleClose();\n        return;\n      }\n      getManufacturers(function(err, mans) {\n        if (err) {\n          dispatch(UtilsCreators.changeMessage(err));\n          dispatch(UtilsCreators.changeMessageType(false));\n          dispatch(UtilsCreators.changeMessageColor(\"red\"));\n          return;\n        }\n        dispatch(CategoriesCreators.loadManufacturers(mans));\n      });\n      dispatch(UtilsCreators.changeMessage(\"Editado com sucesso\"));\n      dispatch(UtilsCreators.changeMessageType(true));\n      dispatch(UtilsCreators.changeMessageColor(\"green\"));\n      handleClose();\n      setVisible(true);\n    });\n  }\n\n  function delMan(id) {\n    deleteManufacturer(id, function(err, data) {\n      if (err) {\n        dispatch(UtilsCreators.changeMessage(err));\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n        return;\n      }\n      getManufacturers(function(err, mans) {\n        dispatch(ManufacturerCreators.loadManufacturers(mans));\n      });\n      dispatch(UtilsCreators.changeMessage(\"Deletado com sucesso\"));\n      dispatch(UtilsCreators.changeMessageType(true));\n      dispatch(UtilsCreators.changeMessageColor(\"green\"));\n      setVisible(true);\n    });\n  }\n\n  return (\n    <>\n      <h3 className=\"main-title\" style={{ color: \"rgb(129, 22, 27)\" }}>\n        Lista de fabricantes\n      </h3>\n\n      <div>\n        <Dialog\n          open={diag}\n          onClose={handleClose}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Editar categoria</DialogTitle>\n          <DialogContent>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"name\"\n              label=\"Nome\"\n              type=\"text\"\n              value={manufacturerToEdit.name}\n              onChange={e =>\n                setManufacturerToEdit({\n                  ...manufacturerToEdit,\n                  name: e.target.value\n                })\n              }\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"description\"\n              label=\"Descrição\"\n              type=\"text\"\n              value={manufacturerToEdit.description}\n              onChange={e =>\n                setManufacturerToEdit({\n                  ...manufacturerToEdit,\n                  description: e.target.value\n                })\n              }\n              fullWidth\n            />\n            <ImageContainer>\n              <Upload\n                id=\"editMan\"\n                file={file}\n                name=\"editMan\"\n                labelInputFile=\"Logo fabricante\"\n                imageURL={manufacturerToEdit.appIcon}\n                key={key}\n              />\n            </ImageContainer>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancelar\n            </Button>\n            <Button onClick={() => editMan(manufacturerToEdit)} color=\"primary\">\n              Salvar\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n\n      <DivListCategories>\n        {manufacturers.map((manufacturer, id) => (\n          <ManufacturerContainer\n            flexDirection=\"row\"\n            justifyContent=\"space-between\"\n            style={{ borderBottom: \"1px solid lightgrey\" }}\n            key={id}\n          >\n            <ManufacturerContainer\n              flexDirection=\"column\"\n              style={{ display: \"flex\", justifyContent: \"column\" }}\n            >\n              <p style={{ fontWeight: \"200\" }}>Nome: {manufacturer.name}</p>\n              <p style={{ fontWeight: \"200\" }}>\n                Descrição: {manufacturer.description}\n              </p>\n              <p>\n                Logo:\n                <span style={{ marginLeft: \"10px\" }}>\n                  <img src={manufacturer.appIcon} style={{ width: \"120px\" }} />\n                </span>\n              </p>\n            </ManufacturerContainer>\n            <ManufacturerContainer\n              flexDirection=\"column\"\n              style={{ marginRight: \"10px\", marginLeft: \"10px\" }}\n            >\n              <Button onClick={() => handleOpen(manufacturer)}>Editar</Button>\n              <Button onClick={() => delMan(manufacturer.id)}>Apagar</Button>\n            </ManufacturerContainer>\n          </ManufacturerContainer>\n        ))}\n      </DivListCategories>\n\n      {visible ? (\n        <Message result={messageType} color={messageColor} message={message} />\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n}\n\nexport const Hr = styled.hr`\n  width: 50%;\n`;\n\nexport const Subcontainer = styled.div`\n  padding: 0 15px;\n`;\n\nexport const ImageContainer = styled.div`\n  img {\n    max-width: 220px;\n    display: block;\n    margin: 10px auto;\n  }\n`;\n\nexport const DivListCategories = styled.div`\n  max-height: 550px;\n  overflow: auto;\n  /* width */\n  ::-webkit-scrollbar {\n    width: 10px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: rgb(129, 22, 27);\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n`;\n\nexport const ManufacturerContainer = styled.div`\n  display: flex;\n  flex-direction: ${props => props.flexDirection};\n  justify-content: ${props => props.justifyContent};\n`;\n"]},"metadata":{},"sourceType":"module"}