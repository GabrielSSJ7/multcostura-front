{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  img {\\n    max-width: 120px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport setApi from \"../../../api\";\nimport { validateImage } from \"../../../utils/validate\";\nimport { Creators as UploadCreators } from \"../../../ducks/upload\";\nimport { Creators as ManufacturerCreators } from \"../../../ducks/manufacturer\";\nimport { Button, Input, TextArea } from \"../../../static/styled-components/base\";\nimport Upload from \"../../../components/utils/Upload\";\nexport default function AddManufacturer() {\n  var reactCtx = React.createContext({});\n\n  var _this = useContext(reactCtx);\n\n  var _useSelector = useSelector(function (state) {\n    return state.Utils;\n  }),\n      message = _useSelector.message,\n      result = _useSelector.messageType,\n      color = _useSelector.messageColor;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.Upload;\n  }),\n      file = _useSelector2.file;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      description = _useState3[0],\n      setDescription = _useState3[1];\n\n  useEffect(function () {\n    setName('');\n    setDescription('');\n    dispatch(UploadCreators.cleanUpUpload());\n  }, []);\n\n  function createManufacturer() {\n    if (name) {\n      if (validateImage([\"png\"], 10000, file)) {\n        var formData = new FormData();\n        formData.append(\"icon\", file);\n        setApi().post(\"categories?name=\".concat(name, \"&description=\").concat(description), formData).then(function (response) {\n          dispatch(UtilsCreators.changeMessage(\"Fabricante criada com sucesso\"));\n          dispatch(UtilsCreators.changeMessageType(true));\n          dispatch(UtilsCreators.changeMessageColor(\"green\"));\n          setVisible(true);\n          setName(\"\");\n          setDescription(\"\");\n          dispatch(UploadCreators.cleanUpUpload());\n          dispatch(UploadCreators.changeFile(null));\n          getCategories(function (err, manufacturers) {\n            if (err) {\n              dispatch(UtilsCreators.changeMessage(err));\n              dispatch(UtilsCreators.changeMessageType(false));\n              dispatch(UtilsCreators.changeMessageColor(\"red\"));\n              setVisible(true);\n              return;\n            }\n\n            dispatch(ManufacturerCreators.loadManufacturers(manufacturers));\n          });\n        })[\"catch\"](function (err) {\n          dispatch(UtilsCreators.changeMessage(err.response ? err.response.data : err.toString()));\n          dispatch(UtilsCreators.changeMessageType(false));\n          dispatch(UtilsCreators.changeMessageColor(\"red\"));\n          setVisible(true);\n        });\n      } else {\n        dispatch(UtilsCreators.changeMessage(\"Suba imagens PNG com no máximo 100KB\"));\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n      }\n    } else {\n      dispatch(UtilsCreators.changeMessage(\"O nome é necessário\"));\n      dispatch(UtilsCreators.changeMessageType(false));\n      dispatch(UtilsCreators.changeMessageColor(\"red\"));\n      setVisible(true);\n    }\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: \"main-title\",\n    style: {\n      color: \"rgb(129, 22, 27)\"\n    }\n  }, \"Adicionar nova categoria\"), __jsx(\"div\", null, __jsx(Input, {\n    placeholder: \"Nome\",\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    value: name\n  }), __jsx(TextArea, {\n    placeholder: \"Descri\\xE7\\xE3o\",\n    rows: \"3\",\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    value: description\n  }), __jsx(ImageContainer, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(Upload, {\n    labelInputFile: \"Logo fabricante\",\n    onRef: function onRef(ref) {\n      return _this.child = ref;\n    }\n  }))), visible ? __jsx(Message, {\n    result: result,\n    color: color,\n    message: message\n  }) : \"\", __jsx(Button, {\n    onClick: createManufacturer\n  }, \"Criar fabricante\"));\n}\nvar ImageContainer = styled.div(_templateObject());","map":{"version":3,"sources":["/home/ti/Projects/WebProjects/multcostura/web-multcostura/src/components/admin/manufacturers/AddManufacturer.jsx"],"names":["React","useState","useEffect","useContext","useSelector","useDispatch","styled","setApi","validateImage","Creators","UploadCreators","ManufacturerCreators","Button","Input","TextArea","Upload","AddManufacturer","reactCtx","createContext","_this","state","Utils","message","result","messageType","color","messageColor","file","dispatch","visible","setVisible","name","setName","description","setDescription","cleanUpUpload","createManufacturer","formData","FormData","append","post","then","response","UtilsCreators","changeMessage","changeMessageType","changeMessageColor","changeFile","getCategories","err","manufacturers","loadManufacturers","data","toString","e","target","value","display","justifyContent","ref","child","ImageContainer","div"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport setApi from \"../../../api\";\nimport { validateImage } from \"../../../utils/validate\";\nimport { Creators as UploadCreators } from \"../../../ducks/upload\";\nimport { Creators as ManufacturerCreators } from \"../../../ducks/manufacturer\";\n\nimport {\n  Button,\n  Input,\n  TextArea\n} from \"../../../static/styled-components/base\";\nimport Upload from \"../../../components/utils/Upload\";\n\nexport default function AddManufacturer() {\n  const reactCtx = React.createContext({});\n  const _this = useContext(reactCtx);\n  const { message, messageType: result, messageColor: color } = useSelector(\n    state => state.Utils\n  );\n  const { file } = useSelector(state => state.Upload);\n  const dispatch = useDispatch();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  useEffect(() => {\n      setName('')\n      setDescription('')\n      dispatch(UploadCreators.cleanUpUpload())\n  }, [])\n\n  function createManufacturer() {\n    if (name) {\n      if (validateImage([\"png\"], 10000, file)) {\n        const formData = new FormData();\n        formData.append(\"icon\", file);\n        setApi()\n          .post(`categories?name=${name}&description=${description}`, formData)\n          .then(response => {\n            dispatch(\n              UtilsCreators.changeMessage(\"Fabricante criada com sucesso\")\n            );\n            dispatch(UtilsCreators.changeMessageType(true));\n            dispatch(UtilsCreators.changeMessageColor(\"green\"));\n            setVisible(true);\n            setName(\"\");\n            setDescription(\"\");\n            dispatch(UploadCreators.cleanUpUpload());\n            dispatch(UploadCreators.changeFile(null));\n            getCategories(function(err, manufacturers) {\n              if (err) {\n                dispatch(UtilsCreators.changeMessage(err));\n                dispatch(UtilsCreators.changeMessageType(false));\n                dispatch(UtilsCreators.changeMessageColor(\"red\"));\n                setVisible(true);\n                return;\n              }\n              dispatch(ManufacturerCreators.loadManufacturers(manufacturers));\n            });\n          })\n          .catch(err => {\n            dispatch(\n              UtilsCreators.changeMessage(\n                err.response ? err.response.data : err.toString()\n              )\n            );\n            dispatch(UtilsCreators.changeMessageType(false));\n            dispatch(UtilsCreators.changeMessageColor(\"red\"));\n            setVisible(true);\n          });\n      } else {\n        dispatch(\n          UtilsCreators.changeMessage(\"Suba imagens PNG com no máximo 100KB\")\n        );\n        dispatch(UtilsCreators.changeMessageType(false));\n        dispatch(UtilsCreators.changeMessageColor(\"red\"));\n        setVisible(true);\n      }\n    } else {\n      dispatch(UtilsCreators.changeMessage(\"O nome é necessário\"));\n      dispatch(UtilsCreators.changeMessageType(false));\n      dispatch(UtilsCreators.changeMessageColor(\"red\"));\n      setVisible(true);\n    }\n  }\n\n  return (\n    <>\n      <h3 className=\"main-title\" style={{ color: \"rgb(129, 22, 27)\" }}>\n        Adicionar nova categoria\n      </h3>\n      <div>\n        <Input\n          placeholder=\"Nome\"\n          onChange={e => setName(e.target.value) }\n          value={name}\n        />\n        <TextArea\n          placeholder=\"Descrição\"\n          rows=\"3\"\n          onChange={e => setDescription(e.target.value)}\n          value={description}\n        />\n        <ImageContainer\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\"\n          }}\n        >\n          <Upload\n            labelInputFile=\"Logo fabricante\"\n            onRef={ref => (_this.child = ref)}\n          />\n        </ImageContainer>\n      </div>\n      {visible ? (\n        <Message result={result} color={color} message={message} />\n      ) : (\n        \"\"\n      )}\n      <Button onClick={createManufacturer}>Criar fabricante</Button>\n    </>\n  );\n}\n\nconst ImageContainer = styled.div`\n  img {\n    max-width: 120px;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}